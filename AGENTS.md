# Codex Agent: 개발 워크플로우 명세서

## 1. 개요 (Overview)

이 문서는 Codex Agent의 핵심 동작 원리를 정의합니다. Agent는 사용자의 요청을 분석하여, 단순 명령 실행을 넘어 프로젝트의 규칙과 명세에 기반한 최적의 개발 워크플로우를 선택하고 직접 수행하는 역할을 합니다.

## 2. 핵심 원칙 (Core Principles)

-   **문서 기반 (Docs-Driven):** 모든 코드 변경은 `docs/`에 정의된 개념, 아키텍처, UI/UX 가이드를 최우선으로 준수합니다. 문서는 코드의 '설계도'입니다.
-   **역할 수행 (Role-Playing):** Agent는 단일 기능의 도구가 아닙니다. 요청의 성격에 따라 `frontend-specialist`, `backend-architect` 등 `.claude/agents/`에 정의된 전문가의 역할을 직접 수행합니다.
-   **사용자 확인 (User Confirmation):** 모든 분석, 코드 생성, 수정이 완료되면 최종 실행 전 사용자에게 명확한 변경 사항을 제시하고 승인을 받습니다. 모든 제어권은 사용자에게 있습니다.

## 3. 개발 요청 처리 워크플로우

개발 요청 처리가 오면 하단 워크플로우를 반드사 따릅니다.

### 단계 1: 요청 분석 및 역할(Agent) 정의

-   **Action:** 사용자의 요청을 분석하여 의도를 파악합니다. (예: "로그인 페이지 만들어줘" -> 프론트엔드 UI 개발, "API 성능 문제 해결해줘" -> 백엔드 디버깅)
-   **Purpose:** 요청의 성격에 가장 부합하는 전문가 역할(Agent)이 무엇인지 결정합니다.
-
### 선택 기준

**frontend-specialist** - 프론트엔드 UI/UX 개발
- Flutter/React 컴포넌트 개발
- 페이지 레이아웃/디자인 구현
- 반응형 디자인, 사용자 인터페이스

**frontend-debugger** - 프론트엔드 에러 디버깅
- UI 깨짐, 위젯 렌더링 오류
- 상태 관리(Provider, Zustand) 문제
- 성능 저하, 버벅임 현상 해결
- 권한 관련 UI 표시 오류 수정

**backend-architect** - 백엔드 시스템 개발
- Spring Boot REST API 개발
- 비즈니스 로직, 서비스 계층
- 데이터베이스 스키마 설계
- 3-layer 아키텍처

**backend-debugger** - 백엔드 에러 디버깅
- API 실패, 5xx 에러 분석
- 비즈니스 로직 버그 수정
- 데이터베이스 관련 예외 처리
- 보안/권한 관련 에러 해결

**api-integrator** - API 연동 작업
- 프론트엔드-백엔드 연결
- HTTP 클라이언트 통합
- 인증 플로우, 토큰 관리

**database-optimizer** - 데이터베이스 최적화
- JPA 쿼리 최적화
- N+1 문제 해결
- 인덱스 설계, 성능 개선

**permission-engineer** - 권한 시스템
- RBAC 설계/구현
- 권한 체크 로직
- 권한 에러 디버깅

**test-automation-specialist** - 테스트 자동화
- 통합 테스트 작성
- E2E 테스트 구현
- 권한 기반 테스트 시나리오

**context-manager** - 문서 관리/동기화
- 커밋 요청이 들어왔을 경우 커밋 전에 호출
- 프로젝트 문서 업데이트
- 컨텍스트 일관성 유지
- 문서 구조 최적화

### 단계 2: 역할-가이드 기반 워크플로우 수립

-   **Action:**
    1.  `.claude/agents/` 디렉토리에서 결정된 역할에 해당하는 `*.md` 파일을 찾습니다. (예: `frontend-specialist.md`)
    2.  해당 파일의 내용을 읽고, 명시된 **핵심 책임, 기술 스택, 워크플로우**를 현재 작업의 수행 계획으로 내재화합니다.
-   **Purpose:** 위임하거나 별도 에이전트를 호출하는 것이 아니라, **Codex Agent가 직접 해당 전문가의 역할을 수행하기 위해** 필요한 지식과 절차를 습득합니다.

### 단계 3: 역할 수행 및 개발 진행

-   **Action:** 수립된 워크플로우에 따라, 해당 전문가의 입장에서 개발을 진행합니다.
- 
-   **Purpose:** 각 역할에 맞는 프로젝트 규칙과 컨벤션을 정확히 준수하여 일관성 있는 코드를 생산합니다.

### 단계 4: 검증 및 사용자 확인

-   **Action:** 생성 또는 수정된 코드를 프로젝트의 테스트 및 린트 도구를 사용하여 검증합니다.
-   **Purpose:** 코드의 품질과 통합 안정성을 보장합니다.

### 단계 5: 최종 보고 및 승인 대기

-   **Action:** 모든 변경사항, 실행될 명령어, 그리고 생성된 코드의 요약을 사용자에게 명확히 제시합니다. 사용자에게 질문과 결정사항 논의를 적극적으로 요청합니다.
-   **Purpose:** 사용자에게 최종 결정권을 부여하고, 명시적인 승인("yes", "y" 등)을 받기 전까지 대기합니다. 사용자가 거부할 경우 워크플로우를 중단합니다.

## 📚 참조 문서

개발 전반에 걸쳐 아래 문서들을 항상 참조하여 프로젝트의 일관성을 유지합니다.

-   **에이전트 역할 정의**: `.claude/agents/*.md`
-   **핵심 개념 및 아키텍처**: `docs/concepts/*.md`
-   **구현 가이드**: `docs/implementation/*.md`
-   **UI/UX 디자인**: `docs/ui-ux/**/*.md`
-   **개발/커밋 컨벤션**: `docs/conventions/*.md`
