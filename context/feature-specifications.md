# 기능 명세 종합 (Master Feature List)

**본 문서는 `docs/설계 문서/기능명세서`에 정의된 모든 기능의 핵심 사항을 종합하고, 현재 구현 상태를 추적하기 위해 작성되었습니다.**

---

## 1. 회원가입 / 로그인 (Sign-up / Login)

- **상태:** 핵심 구현 완료 ✅, 일부 보완 후순위 ⚠️ (이메일 OTP, 교수 승인)
- **개요(업데이트):** Google 로그인 후 첫 로그인 사용자에게 단일 온보딩 화면에서 프로필·역할·학적·학교 이메일을 한 번에 수집. 교수 선택 시 승인 대기(PENDING)로 표기되며 홈 상단 배너로 안내. 학교 이메일 인증(OTP)은 MVP 말로 이연되며 도메인은 `hs.ac.kr`만 허용.
- **핵심 UX:** `한 화면 = 한 목표`. 온보딩 단일 화면에 다음 항목 포함: 실명, 닉네임(중복 확인/제안), 학과, 학번, 역할 선택(학생/교수), 학교 이메일(힌트만 표시).
- **주요 기능:**
    - **Google OAuth2 인증:** `/api/auth/google/callback { id_token }` 우선 사용, 필요 시 `/api/auth/google` 폴백.
    - **단일 온보딩 제출:** `POST /api/users { name, nickname, dept?, studentNo?, schoolEmail, role }` → 성공 시 `/api/me`로 갱신.
    - **닉네임 중복 확인:** `GET /api/users/nickname-check?nickname=...` 디바운스(400ms) + 제안 칩 노출.
    - **교수 선택 시 처리:** 서버에서 `professorStatus=PENDING` 설정, 홈 상단 고정 배너로 안내.
    - **JWT 기반 인증:** 액세스 토큰 저장 및 자동 헤더 주입.
- **개발 단계 임시 정책:**
    - 가입 시 소속 부서는 기본값으로 `AI/SW 학부`가 적용됩니다(입력값이 없을 때).
    - 기본 그룹(한신대학교 → AI/SW 대학 → AI/SW 학부)이 자동 생성되며, 프로필 제출 시 `AI/SW 학부` 그룹에 자동 가입됩니다.

- **후순위(이연) 기능:**
    - **학교 이메일 인증(OTP):** `POST /api/email/verification/send|verify` 엔드포인트 준비, UI/플로우는 MVP 말 구현. 허용 도메인: `hs.ac.kr`.
    - **교수 역할 승인:** 관리자 승인/반려 워크플로우 및 UI.

---

## 2. 그룹 / 워크스페이스 (Group / Workspace)

- **상태:** 핵심 구현 완료 ✅ (워크스페이스 관리 기능 완성)
- **개요:** 사용자들이 커뮤니티(그룹)를 형성하고, 각 그룹은 슬랙과 유사한 **단일 워크스페이스(1:1)** 를 갖습니다. 워크스페이스 내부에는 **여러 채널**을 생성할 수 있으며, 채널별 권한(읽기/작성/관리)에 따라 접근과 작성 권한을 제한합니다.
- **주요 기능:**
    - **최상위 그룹 생성:** 시스템 관리자가 대학, 단과대 등 기본 조직 그룹을 생성.
    - **하위 그룹 생성 신청:** 일반 사용자가 상위 그룹 내에 소속될 하위 그룹(스터디, 팀 등) 생성을 신청.
    - **승인 워크플로우:** 상위 그룹의 그룹장이 하위 그룹 생성 신청을 승인/반려.
    - **그룹장 유고 처리:** 그룹장 부재 시, 가입일 및 학년 기준으로 임시 그룹장 자동 위임.
    - **그룹 상세/가입 신청 (신규):** 프론트에 그룹 상세 화면(`/group`) 추가, 가입 신청 시 `message` 본문(optional) 포함 전송.
- **데이터 정책(초기 단계):**
    - 그룹 삭제: **단순 삭제** 정책. 그룹 및 관련 워크스페이스/채널/게시글/댓글이 즉시 삭제됨. (하위 그룹 삭제 동작은 관리자 정책에 따라 연쇄 삭제. 향후 보존 기능 검토 가능)
    - 사용자 탈퇴: 작성한 게시물/댓글은 `(탈퇴한 사용자)`로 익명화 처리.

### 구현 완료된 기능 (핵심 워크스페이스 관리)
- **백엔드 완전 구현:**
  - 그룹/워크스페이스 CRUD API 완성
  - 멤버 관리 API (가입/승인/반려/역할변경/강제탈퇴) 구현
  - 하위 그룹 생성 신청 및 관리 API 구현
  - 그룹 탐색/검색 API (`/api/groups/explore`) 구현
  - 개인별 권한 오버라이드 시스템 구현
  - 소프트 삭제 및 리패런팅 정책 구현
  - 채널 관리 API (생성/수정/삭제/권한설정) 구현
  - 워크스페이스 1:1 매핑 완성 (그룹당 기본 워크스페이스 자동 생성)

- **프론트엔드 최소 구현:**
  - 그룹 목록(`/groups`) → 그룹 상세(`/group`) 라우팅 구현
  - 그룹 탐색(`/explore`) 화면: 검색어/태그/모집중 필터 + 계층 트리(대학교→단과대→학부) + 결과 리스트
  - 모집 전용 탭(`/recruitment`): 모집중 필터 고정 리스트
  - 그룹 상세 화면에서 가입 신청 메시지 입력 및 전송 지원

### 관리자 및 신청/승인
- **관리자 탭 추가:** 공식 그룹 신청, 멤버 가입 신청을 처리하는 관리자 탭을 추가(권한 가드).
- **내 신청 현황:** 마이페이지에 '내 신청 현황' 간단 목록(가입 신청/하위 그룹 신청) 추가.

### 채널/게시글/댓글
- **채널 권한:** 채널 관리 권한 보유자가 채널 생성/수정/삭제 등 관리. 채널 가시성/작성 권한을 채널 단위로 제한.
- **핀 기능:** 사용하지 않음(비활성).
- 백엔드:
  - 그룹/멤버/역할/하위 그룹 신청 API 구현
  - 워크스페이스/채널/게시글/댓글 컨트롤러 기본 구현 및 그룹 상세에 연동 (그룹당 기본 워크스페이스 호환)
  - 멤버 역할 변경/강제 탈퇴 엔드포인트 구현
  - 하위 그룹 신청/관리/조회 엔드포인트 구현
  - 신규: 그룹 탐색/검색 API(`/api/groups/explore`) 추가, 멤버 개인 권한 오버라이드 GET/PUT 추가

### 미구현/개선 예정 (프론트엔드 UI 중심)
- 가입 신청 관리(목록/승인/반려) UI 완성
- 멤버 관리 UI (역할 변경, 강제 탈퇴) 완성
- 역할 관리 폼(생성/삭제) UI 완성
- 하위 그룹 생성 신청 및 관리 UI 완성
- 지도교수 관리 UI (검색/지정/해제) 완성
- 그룹 삭제 UX (바텀 시트 확인 + 빨간색 버튼) 완성
- 워크스페이스 내 채널/게시글/댓글 UI 연동 완성

---

## 3. 권한 및 멤버 관리 (Permissions & Member Management)

- **상태:** 핵심 구현 완료 ✅ (권한 시스템 및 개인 오버라이드 완성)
- **개요:** 역할 기반 접근 제어(RBAC) 시스템. 그룹장이 커스텀 역할을 생성하고 권한을 부여.
- **고정 역할:**
    - **그룹장:** 그룹의 모든 권한을 가지며 수정 불가. (그룹 정보 수정, 그룹 삭제 등 고유 권한 보유)
    - **일반 멤버:** 가입 시 기본 부여되는 역할. (게시글 조회/작성 등 기본 권한)
- **커스텀 역할 권한 목록 (MVP):**
    - **모집 관리:** 가입 신청 처리 및 모집 공고 관리.
    - **멤버 관리:** 멤버 역할 변경 및 강제 탈퇴.
    - **채널 관리:** 채널 생성/수정/삭제 및 타인 게시물 관리.
- **관리 화면:**
    - 멤버 목록, 역할 변경(드롭다운), 강제 탈퇴, 그룹장 위임 기능 제공.
    - 가입 대기자 승인/거절 기능 제공.
    - 신규: 특정 멤버에 대해 역할 권한을 **개인 오버라이드(허용/차단)**로 미세 조정 가능.

---

## 4. 홍보 / 모집 (Promotion / Recruitment)

- **상태:** 미구현 ❌
- **개요:** 서비스 내 별도 '모집' 게시판을 통해 그룹 홍보 및 신규 멤버 모집.
- **주요 기능:**
    - **모집 공고 작성:** 제목, 본문, 모집 기간, 모집 인원, 태그 등 필수 정보 입력.
    - **게시 정책:** 한 그룹은 동시에 **하나의 활성 공고**만 게시 가능.
    - **상태 관리:** 모집 기간 종료 시 자동으로 '마감' 처리 및 목록에서 비공개.
    - **지원 방법:** 별도 지원서 없이, 공고를 통해 그룹 페이지로 이동 후 '가입 신청' 기능을 재사용.
- **UI/UX:**
    - 활성 공고가 있을 경우, 새 공고 작성 시도 시 안내 메시지와 함께 차단.

---

## 5. 게시글 / 댓글 (Posts / Comments)

- **상태:** 미구현 ❌
- **개요:** 워크스페이스 내 채널에서 사용하는 실시간 채팅 형식의 소통 기능.
- **구조:**
    - **채팅 형식:** 최신 메시지가 하단에 표시되고, 입력창은 하단에 고정.
    - **게시물:** 제목 없이 본문만으로 구성. (작성자, 시간, 본문, 반응, 댓글 수)
    - **댓글:** **1단계 댓글(대댓글 미지원)**만 구현. (단, DB 스키마는 `parent_comment_id` 필드를 포함하여 확장성 확보)
- **주요 기능:**
    - **CRUD:** 자신이 작성한 게시물/댓글만 수정/삭제 가능.
    - **관리자 중재:** '채널 관리' 권한 보유자는 타인의 게시물/댓글 삭제 가능.
- **삭제 정책:** 부모 댓글 삭제 시, 모든 대댓글도 함께 영구 삭제.

---

## 6. 알림 시스템 (Notification System)

- **상태:** 미구현 ❌
- **개요:** 사용자의 주요 활동 및 상호작용에 대한 실시간 알림.
- **기술/정책:**
    - **구조화된 데이터:** 모든 알림 정보를 구조화하여 저장 (향후 '개인화 홈' 기능에 활용).
    - **데이터 보관:** 생성 후 90일이 지난 알림은 자동 삭제.
- **UI/UX:**
    - 상단 헤더에 종(🔔) 아이콘과 읽지 않은 알림(빨간 점) 표시.
    - 아이콘 클릭 시 드롭다운 목록 표시, 목록을 여는 순간 '읽음' 처리.
    - 알림 클릭 시 관련 페이지로 이동.
- **알림 종류 (MVP):**
    - 그룹 가입 신청 결과 (승인/거절).
    - 새로운 그룹 가입 신청 접수.
    - 내 역할 변경.

---

## 7. 관리자 페이지 (Admin Page)

- **상태:** 미구현 ❌
- **개요:** 권한을 가진 사용자를 위한 그룹 관리 기능 모음.
- **핵심 UX:** `Toss UI/UX 적용`.
    - **관리 홈:** 아이콘과 설명이 포함된 카드/리스트 형태의 메뉴. (`가입 대기 N명` 등 맥락 정보 표시)
    - **한 화면 설정:** 역할/채널 생성 시 여러 단계의 복잡한 흐름 대신, 한 페이지 내에서 모든 설정을 완료하고 저장.
    - **강력한 확인 절차:** 그룹 삭제 시 바텀 시트(Bottom Sheet)를 통해 삭제될 데이터를 명확히 안내하고, 빨간색 버튼으로 최종 확인.
- **MVP 기능 목록:**
    - 멤버 관리, 역할 관리, 채널 관리, 지도교수 관리, 그룹 정보 수정, 그룹 삭제.

---

## 8. 사용자 프로필 및 계정 관리 (User Profile & Account)

- **상태:** 부분 구현 ⚠️
- **개요:** 사용자 정보 조회, 프로필 수정 및 계정 설정.
- **구현 완료된 기능:**
    - **프로필 초기 설정:** 회원가입 시 닉네임, 프로필 사진(URL), 자기소개 입력.
    - **내 정보 조회 API:** `/api/users/me` 엔드포인트.
- **미구현 및 개선 필요 기능:**
    - **프로필 수정:** 가입 후 프로필 사진, 닉네임, 한 줄 소개 수정 기능.
    - **서비스 탈퇴:**
        - **UI/UX 변경:** "탈퇴하겠습니다" 문구 입력 대신, **바텀 시트**를 통한 결과 안내 및 **빨간색 [탈퇴하기] 버튼**으로 최종 확인.
        - **데이터 처리:** 사용자가 작성한 게시물/댓글은 `(탈퇴한 사용자)`로 익명화.
