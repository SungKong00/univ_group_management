# 캘린더 통합 시스템 (Calendar Integration)

개인 캘린더, 그룹 캘린더, 장소 캘린더 세 가지가 유기적으로 연동되는 방식을 설명합니다.

## 개요

대학 구성원의 **학업, 개인, 그룹 활동**을 효율적으로 관리하기 위해 세 캘린더가 통합됩니다.

## 세 캘린더의 역할

### 개인 캘린더 (Personal Calendar)
- **시간표**: 고정된 주간 스케줄 (강의, 정기 회의)
- **캘린더**: 모든 일정을 월/주/일 뷰로 통합 관리

### 그룹 캘린더 (Group Calendar)
- 그룹의 모든 멤버가 공유하는 일정
- 공식 일정(공지형, 대상 지정형, RSVP형) + 비공식 일정

### 장소 캘린더 (Place Calendar)
- 그룹이 관리하는 장소의 예약 현황
- 모든 사용자에게 공개

## 통합 흐름

### 1️⃣ 시간표 데이터 활용 (Phase 1 MVP)

개인 캘린더의 **시간표**에 등록된 정보가:
```
개인 캘린더 (시간표)
  ↓ (분석 데이터로 활용)
그룹 캘린더 (예약 가능 시간 표시)
  ↓ (참석 불가능 시간 회색 표시)
일정 생성 시 충돌 방지
```

**참고**: "예약 가능 시간 표시"는 Phase 1(MVP) 기능이며, 자동 최적 시간 추천은 Phase 2 이후에 구현될 예정입니다.

### 2️⃣ 일정 동기화 (Phase 2 이후)

그룹 캘린더에서 개인 캘린더로:
```
그룹 캘린더
  ├─ 일정 초대 받음 (GENERAL, TARGETED)
  └─ "참여합니다" 클릭
       ↓
개인 캘린더
  └─ 해당 일정 자동 표시 (구현 예정)
       ↓
사용자는 한곳에서 모든 약속 확인
```

**참고**: Phase 1 MVP는 그룹 캘린더만 제공하며, 자동 동기화 기능은 Phase 2 이후에 구현될 예정입니다.

### 3️⃣ 장소 예약 통합 (Phase 1 MVP 기본)

그룹 일정 생성 시 장소 예약:
```
그룹 캘린더에서 일정 생성
  ├─ 일정 정보 입력 (시간, 대상자)
  └─ 장소 선택 (선택사항)
       ↓
장소 캘린더
  └─ 해당 시간에 예약 표시
       ↓
모든 사용자가 장소 예약 현황 조회 가능
```

## 실제 사용 시나리오

### 시나리오: 학과 워크샵 개최

**1단계: 일정 생성 (Phase 1 MVP)**
- 운영진이 그룹 캘린더에서 일정 생성
- 시간표 기반 예약 가능 시간 표시 확인 (충돌 시간은 회색 표시)
- "워크샵" 공식 일정 생성
- 전체 멤버 대상 지정
- 행사장(강의실 203) 선택

**2단계: 멤버 확인 (Phase 1 MVP)**
- 그룹 캘린더에서 "워크샵" 일정 확인
- "참여합니다" 클릭
- 장소 캘린더에서 "강의실 203" 예약 현황 조회 가능

**3단계: 자동 동기화 (Phase 2 이후)**
- 개인 캘린더 11월 20일에 "워크샵" 자동 표시 (구현 예정)
- 사용자는 개인 캘린더에서 모든 확정 일정 확인

**4단계: 향후 확장 기능 (Phase 2 이후)**
- TARGETED 일정 (조건 기반 자동 초대)
- RSVP 일정 (인원 제한)
- 채널 자동 연동 (공지글 자동 생성)

## 권한 정리

| 기능 | 필요 권한 |
|------|---------|
| 개인 시간표/캘린더 관리 | (없음) - 본인만 |
| 그룹 캘린더 조회 | (없음) - 모든 그룹 멤버 |
| 그룹 일정 생성 | `CALENDAR_MANAGE` (공식) / 멤버 (비공식) |
| 그룹 일정 수정/삭제 | `CALENDAR_MANAGE` 또는 작성자 |
| 장소 등록/관리 | `CALENDAR_MANAGE` |
| 장소 예약 | (없음) - APPROVED 상태 + 멤버 |

## 데이터 흐름 다이어그램

```
사용자
├─ 개인 시간표 입력
│  └─ 강의, 정기 회의 등록
│
├─ 그룹 캘린더 참여
│  ├─ 최적 시간 추천 (시간표 기반)
│  ├─ 일정 참여 의사 표시
│  └─ 개인 캘린더에 자동 동기화
│
└─ 장소 예약 (일정 생성 시)
   ├─ 장소 캘린더 등록
   └─ 모든 사용자가 조회 가능
```

## 핵심 특징

### Phase 1 MVP (구현 완료)
✅ **기본 통합**: 그룹 캘린더 + 장소 캘린더 연동
✅ **충돌 방지**: 시간표 기반 예약 가능 시간 표시
✅ **투명성**: 장소 예약 현황 공개 조회
✅ **권한 단순화**: `CALENDAR_MANAGE` 1개로 캘린더 관리

### Phase 2 이후 (구현 예정)
⏳ **자동화**: 참여 의사 표시 시 개인 캘린더 자동 동기화
⏳ **편의성**: 최적 시간 추천으로 일정 조율 간편화
⏳ **고급 기능**: TARGETED, RSVP, 채널 자동 연동

## 관련 문서

- [개인 캘린더 시스템](personal-calendar-system.md)
- [그룹 캘린더 시스템](group-calendar-system.md)
- [장소 캘린더 시스템](place-calendar-system.md)
- [캘린더 설계](../backend/calendar-core-design.md) - 기술 설계 결정사항
- [캘린더 통합 로드맵](../features/calendar-integration-roadmap.md) - 개발 일정
