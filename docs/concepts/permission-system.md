# 권한 시스템 (Permission System)

## 역할에 따른 차별화된 기능

그룹 내에서 사용자는 각자의 역할에 따라 다른 기능을 사용할 수 있습니다. 이는 실제 조직에서 직책에 따라 권한이 다른 것과 같은 원리입니다.

**기본 원리**: `사용자` → `역할 부여` → `역할별 기능 사용`

## 권한의 두 가지 범위

### 그룹 전체 권한
그룹 운영과 관련된 전반적인 권한들입니다.

- **그룹 관리**: 그룹 정보 수정, 삭제 권한
- **멤버 관리**: 멤버 초대, 강제 탈퇴, 역할 변경 권한
- **채널 관리**: 새 채널 생성, 삭제, 채널 설정 변경 권한
- **모집 관리**: 신규 멤버 모집 게시글 작성 및 지원자 심사 권한

### 채널별 권한
각 채널에서의 활동과 관련된 세부 권한들입니다.

- **채널 보기**: 채널 존재 확인 및 입장 권한
- **글 읽기**: 채널 내 게시글과 댓글 읽기 권한
- **글 쓰기**: 새로운 게시글 작성 권한
- **댓글 쓰기**: 다른 사람 글에 댓글 달기 권한
- **파일 업로드**: 게시글이나 댓글에 파일 첨부 권한

## 기본 역할

모든 그룹에는 다음 두 가지 기본 역할이 자동으로 생성됩니다.

### Owner (그룹 오너)
그룹의 최고 관리자로서 모든 권한을 가집니다.

- **모든 권한 보유**: 그룹 내에서 할 수 있는 모든 일을 처리
- **소유권 양도**: 필요시 다른 멤버에게 오너 권한 이양 가능
- **삭제 불가**: 시스템에서 자동 생성되므로 삭제할 수 없음

### Member (기본 멤버)
그룹에 가입한 모든 사용자의 기본 역할입니다.

- **기본 참여**: 그룹 워크스페이스 접근 가능
- **채널별 권한**: 각 채널에서의 구체적 권한은 별도 설정
- **확장 가능**: 필요시 추가 권한을 가진 역할로 변경 가능

## 맞춤형 역할 만들기

그룹의 특성에 맞게 필요한 역할을 직접 만들 수 있습니다.

### 운영진 (Staff)
동아리나 학회의 중간 관리자 역할입니다.

- **담당 업무**: 채널 관리, 멤버 관리
- **활용 예시**: 동아리 부회장, 학회 운영진
- **권한 범위**: 일상적인 그룹 관리 업무 담당

### 모집 담당자 (Recruitment Manager)
신규 멤버 모집을 전담하는 역할입니다.

- **담당 업무**: 모집 게시글 작성, 지원자 심사, 가입 승인
- **활용 예시**: 신입 모집 시즌의 전담 팀
- **권한 범위**: 모집 관련 모든 업무 + 멤버 관리

### 컨텐츠 관리자 (Content Manager)
채널과 컨텐츠 관리를 담당하는 역할입니다.

- **담당 업무**: 채널 생성/삭제, 채널 설정 관리
- **활용 예시**: 대형 그룹의 채널 전담 관리자
- **권한 범위**: 채널 관리에 특화된 권한

## 권한 확인 방식

### 역할 기반 권한 체크
시스템은 사용자의 역할을 확인하여 특정 기능 사용 권한을 판단합니다.

**확인 과정**:
1. **사용자 역할 조회**: 해당 그룹에서 사용자가 가진 역할 확인
2. **역할 권한 조회**: 그 역할에 할당된 권한 목록 확인
3. **기능 허용/거부**: 요청한 기능에 필요한 권한이 있는지 판단

### 사용자 인터페이스 반영
권한이 없는 기능은 사용자에게 보이지 않거나 비활성화됩니다.

**예시 상황들**:
- 멤버 관리 권한이 없으면 "멤버 강제 탈퇴" 버튼이 보이지 않음
- 채널 관리 권한이 없으면 "새 채널 생성" 메뉴가 비활성화됨
- 모집 관리 권한이 없으면 "모집 게시글 작성" 기능에 접근 불가

## 그룹 간의 관계와 권한

### 원칙: 그룹 권한의 독립성
각 그룹의 권한은 완전히 독립적으로 운영됩니다. 한 그룹의 역할(예: 운영진)은 다른 그룹(상위, 하위, 또는 형제 그룹)에 아무런 영향을 미치지 않습니다. 'A 동아리'의 회장이 'B 동아리'에서는 일반 멤버일 뿐인 것처럼, 모든 권한은 해당 그룹 내에서만 유효합니다.

### 예외: 상위 그룹의 제한된 역할
현재 시스템에서 상위 그룹이 하위 그룹에 대해 갖는 유일한 권한은 다음과 같이 매우 제한적입니다.

1.  **하위 공식 그룹 생성 승인**: 하위 공식 그룹이 처음 만들어질 때, 상위 그룹의 관리자가 이 생성 요청을 '승인'하거나 '거부'할 수 있습니다. 이는 그룹의 무분별한 생성을 방지하고 조직 구조를 유지하기 위한 유-일한 통제 장치입니다.

2.  **캘린더 정보의 제한적 참조 (예정)**: 향후 캘린더 기능이 구현될 때, 상위 그룹에서 전체 일정을 계획할 목적으로 하위 그룹의 캘린더 정보를 '참조'할 수 있는 기능이 추가될 예정입니다. 이는 읽기 전용의 제한된 접근이며, 하위 그룹의 일정을 수정하거나 관리하는 권한을 의미하지 않습니다.

위 두 가지 경우를 제외하고, 상위 그룹 관리자가 하위 그룹의 멤버, 역할, 채널, 설정 등을 직접 수정하거나 관리할 수 있는 '감독 권한'이나 '상속 권한'은 **존재하지 않습니다.**

## 실제 활용 사례

### 동아리 임원 임명하기
**상황**: 동아리에서 활발한 멤버를 부회장으로 임명하고 싶음

1. **역할 생성**: "부회장" 또는 "운영진" 역할 생성
2. **권한 설정**: 멤버 관리, 채널 관리 권한 부여
3. **역할 할당**: 해당 멤버에게 새 역할 부여
4. **기능 사용**: 부회장이 멤버 관리와 채널 관리 업무 수행

### 모집 시즌 전담팀 구성
**상황**: 신입 모집 시즌에 전담 팀을 구성하고 싶음

1. **전담 역할 생성**: "모집 담당자" 역할 생성
2. **모집 권한 부여**: 모집 게시글 작성, 지원자 심사 권한 부여
3. **팀원 지정**: 모집 업무 담당자들에게 역할 할당
4. **모집 진행**: 전담팀이 모집 업무 전담 수행

### 채널별 접근 제어
**상황**: 특정 채널은 특정 멤버들만 접근하게 하고 싶음

1. **접근 제한**: 해당 채널의 "채널 보기" 권한을 제한된 역할에만 부여
2. **차별화된 권한**: 역할별로 읽기만 가능, 쓰기 가능 등 세분화
3. **자동 적용**: 권한이 없는 멤버에게는 채널이 보이지 않음
4. **유연한 관리**: 필요시 권한을 쉽게 추가하거나 제거

## 권한 관리 작업 흐름

### 새로운 역할 만들기
1. **역할 이름 설정**: "부회장", "모집담당자" 등 의미있는 이름 지정
2. **권한 선택**: 해당 역할이 필요한 권한들 체크박스로 선택
3. **설명 추가**: 역할의 목적과 담당 업무 간단히 설명
4. **역할 생성**: 저장하면 즉시 그룹 내에서 사용 가능

### 멤버에게 역할 부여하기
1. **멤버 선택**: 역할을 부여할 멤버 선택
2. **역할 변경**: 기존 역할에서 새로운 역할로 변경
3. **즉시 적용**: 변경 즉시 해당 멤버의 권한이 업데이트됨
4. **권한 확인**: 멤버가 새로운 기능에 접근 가능해짐

### 가입 신청 처리하기
1. **신청서 검토**: 지원자의 지원서 내용 확인
2. **승인/거부 결정**: 그룹 정책에 따라 가입 여부 결정
3. **자동 처리**: 승인 시 자동으로 그룹 멤버로 등록
4. **역할 부여**: 필요시 기본 멤버 외 다른 역할 부여

## 더 자세히 알아보기

권한 시스템과 관련된 다른 기능들을 더 알고 싶다면:

- **그룹 구조**: [group-hierarchy.md](group-hierarchy.md) - 그룹 계층과 권한 상속
- **사용자 여정**: [user-lifecycle.md](user-lifecycle.md) - 사용자 역할 변화 과정
- **채널 권한**: [channel-permissions.md](channel-permissions.md) - 채널별 세부 권한 설정
