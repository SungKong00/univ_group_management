# 캘린더 시스템 (Calendar System)

> **개발 우선순위**: Phase 6 이후 (권한 페이지 → 홍보/모집 → 캘린더)
> **구현 상태**: 개념 설계 완료, 백엔드/프론트엔드 미구현 (0%)
> **관련 문서**: [장소 관리](calendar-place-management.md) | [워크스페이스 UI](../ui-ux/pages/workspace-pages.md) | [권한 시스템](permission-system.md)

본 문서는 프로젝트의 캘린더 기능에 대한 개념적 개요를 설명합니다. 캘린더 시스템은 크게 **학교 시간표**, **개인 일정 캘린더**, **그룹 캘린더**, **장소 캘린더** 네 가지로 구성됩니다.

**접근 경로:**
- **학교 시간표, 개인 일정**: 사이드바 "캘린더" 메뉴
- **그룹 캘린더, 장소 캘린더**: 워크스페이스 내부 "그룹 캘린더" 탭
- **오버레이 기능**: 그룹 캘린더에서 개인/학교 시간표 겹쳐보기 가능

## 1. 학교 시간표 (School Timetable)

사용자가 자신의 대학 강의 시간표 및 고정적인 개인 일정을 관리하고 시각적으로 확인하는 기능입니다.

### 주요 특징

-   **뷰**: 기본적으로 월요일부터 토요일, 오전 9시부터 오후 7시까지의 시간표를 보여줍니다. 만약 오후 7시를 넘어가는 일정이 있다면, 뷰가 자동으로 확장되어 해당 일정을 모두 표시합니다.
-   **일정 추가 방식**:
    1.  **강의 추가**: 관리자가 사전에 등록한 학교의 공식 강의 목록에서 자신이 수강하는 과목을 선택하여 시간표에 자동으로 추가합니다.
    2.  **사용자 지정 반복 일정 추가**: 매주 반복되는 개인 일정(예: 아르바이트, 근로 장학생, 동아리 정기 회의)을 직접 생성하여 시간표에 추가할 수 있습니다.

## 2. 개인 일정 캘린더 (Personal Calendar)

사용자 개인의 모든 일정을 통합하여 보여주는 중앙 허브 역할을 합니다. 개발 우선순위는 다른 캘린더 기능 구현 후로 합니다.
자신이 속해있는 그룹에서 일정에 참가하게 된다면, 이 개인 일정 캘린더에서 조회할 수 있습니다.

### 주요 특징

-   **통합 뷰**: 다음 일정들을 모두 모아서 보여줍니다.
    -   자신의 학교 시간표
    -   자신이 참여자로 지정된 모든 그룹의 공식 일정
    -   자신이 참여 신청한 모든 그룹의 공식 일정
    -   자신이 직접 생성한 비공식 그룹 일정
-   **목적**: 개인은 이 캘린더를 통해 자신의 모든 일정을 한 곳에서 종합적으로 파악할 수 있습니다.

## 3. 그룹 캘린더 (Group Calendar)

각 워크스페이스에 종속되어, 해당 워크스페이스의 멤버들이 공유하는 캘린더입니다.

### 3.1. 일정의 종류

그룹 캘린더의 일정은 **공식 일정**과 **비공식 일정**으로 나뉩니다.

-   **공식 일정 (Official Event)**
    -   **생성 권한**: `CALENDAR_MANAGE` 권한을 가진 멤버(예: 그룹장, 운영진)만 생성할 수 있습니다.
    -   **특징**: 그룹의 공식적인 활동을 나타내며, 다양한 부가 기능을 가집니다.
-   **비공식 일정 (Unofficial Event)**
    -   **생성 권한**: 그룹에 속한 모든 멤버가 자유롭게 생성할 수 있습니다.
    -   **특징**: 멤버들 간의 비공식적인 약속이나 소규모 모임 등을 위해 사용됩니다.

### 3.2. 공식 일정의 세부 기능

공식 일정은 목적에 따라 세 가지 방식으로 생성할 수 있습니다.

#### 1. 대상 미지정 (General Event)

-   **목적**: 특정 대상 없이 그룹 전체에 공지하는 단순 일정입니다. (예: '프로젝트 중간 발표일')
-   **기능**: 캘린더에 일정만 기록되며 별도의 알림이나 참여 기능은 없습니다.

#### 2. 대상자 지정 (Targeted Event)

-   **목적**: 특정 조건을 만족하는 멤버들을 대상으로 하는 일정입니다. (예: '1학년 신입생 환영회')
-   **대상자 선택**: 일정을 생성할 때 **학년, 역할, 학번** 등의 조건으로 대상자 그룹을 지정할 수 있습니다.
-   **자동화 기능**:
    -   **알림**: 대상자로 지정된 모든 멤버에게 새로운 일정이 추가되었다는 알림이 발송됩니다.
    -   **캘린더 추가**: 해당 일정이 대상자들의 개인 캘린더에 자동으로 추가됩니다.
-   **참여 의사 표시**:
    -   대상자는 일정에 대해 **불참(Decline)** 의사를 표시할 수 있습니다.
    -   불참 시 간단한 사유를 선택하거나 직접 입력할 수 있습니다.

#### 3. 참여자 신청 (RSVP Event)

-   **목적**: 참여를 원하는 멤버들의 신청을 받는 공개 이벤트입니다. (예: '선배와의 대화 신청')
-   **기능**:
    -   일정이 생성되면 멤버들은 **참여 신청(Apply)** 버튼을 누를 수 있습니다.
    -   현재까지 몇 명이 참여 신청했는지 실시간으로 확인할 수 있습니다.
    -   참여 신청을 한 멤버의 개인 캘린더에 해당 일정이 자동으로 추가됩니다.

### 3.3. 편의 기능

#### 최적 시간 추천 (Smart Time Recommendation)

-   **목적**: '대상자 지정' 일정 생성 시, 참여 가능한 인원이 가장 많은 시간을 추천합니다.
-   **분석 데이터**: 학교 시간표, 개인 일정, 장소 예약 현황을 토글로 선택 가능
-   **결과 표시**: 시간대별 가능 인원/불가능 인원 수를 시각적으로 표시

#### 채널 게시글 연동 (Channel Post Integration)

-   **구현 방식**: Post 모델의 `content` 필드에 JSON 임베딩
-   **기능**:
    -   일정 생성 시 채널 선택 → 게시글 자동 생성
    -   게시글 구조: 일정 정보 박스(상단) + 상세 내용(중간) + 액션 버튼(하단)
    -   액션 버튼: 일정 타입에 따라 `[불참]`, `[참여 신청]` 등 자동 표시
-   **설계 상태**: JSON 스키마 추후 정의 예정

## 4. 장소 캘린더 (Place Calendar)

특정 장소(예: 동아리방, 랩실, 회의실)의 예약 및 일정 관리를 위한 기능입니다.

**핵심 개념:**
- **장소 식별**: `건물-방 번호`로 고유 식별 (예: `60주년 기념관-18203`)
- **관리 주체**: 장소를 등록한 그룹이 관리 권한 보유
- **사용 그룹**: 관리 주체의 승인을 받아 예약 권한 획득

**상세 내용**: [장소 관리 시스템](calendar-place-management.md) 문서 참조

---

## 다음 단계

### 백엔드 구현 필요
- 데이터베이스 스키마 설계 (Event, Timetable, Place 엔티티)
- API 엔드포인트 설계 및 구현
- 권한 시스템 통합 (`CALENDAR_MANAGE` 등)

### 프론트엔드 구현 필요
- 4가지 캘린더 뷰 UI
- 일정 생성/수정/삭제 플로우
- 게시글 연동 UI (JSON 렌더링)

### 관련 문서
- [장소 관리 시스템](calendar-place-management.md) - 장소 예약 및 권한 관리
- [워크스페이스 UI](../ui-ux/pages/workspace-pages.md) - 그룹 캘린더 페이지 UI 명세
- [권한 시스템](permission-system.md) - 캘린더 권한 정의
- [프론트엔드 구현 현황](../implementation/frontend-implementation-status.md)
