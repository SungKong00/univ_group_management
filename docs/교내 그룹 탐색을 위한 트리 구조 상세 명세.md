# 교내 그룹 탐색을 위한 트리 구조 상세 명세

## 1. 개요

본 문서는 교내 모든 그룹을 체계적으로 분류하고 탐색할 수 있는 **계층적 트리 구조(Hierarchical Tree Structure)**를 정의합니다. 사용자는 이 구조를 통해 마치 파일 탐색기처럼 상위 그룹에서 하위 그룹으로 이동하며 원하는 그룹을 쉽게 찾을 수 있습니다. 최상위 루트는 '대학교' 자체이며, 그 아래로 단과대학, 총학생회, 중앙동아리 등의 대분류가 존재하고, 각 분류 아래에 실제 개별 그룹들이 소속되는 형태입니다.

## 2. 핵심 개념

- **그룹(Group):** 트리를 구성하는 기본 단위(Node)입니다. 모든 동아리, 학과, 학생회 등은 하나의 '그룹'입니다.
- **계층 관계(Hierarchy):** 모든 그룹은 단 하나의 **부모 그룹(Parent Group)**을 가집니다. (단, 최상위 그룹 제외). 이 관계를 통해 전체 트리 구조가 형성됩니다.
- **그룹 유형(Group Type):** 그룹의 성격을 구분하는 Enum 값입니다. (예: 단과대학, 학과, 동아리 등). UI 표현이나 권한 제어에 사용됩니다.

## 3. 그룹 종류 및 계층 구조 (Group Types & Hierarchy)

트리는 다음과 같은 다단계 레벨로 구성됩니다.

### Level 0: 루트 (Root)

- **설명:** 전체 트리의 최상위 노드. 대학교 자체를 의미합니다.
- **`groupType`:** `ROOT`
- **`parentId`:** `null`
- **예시:** `OO대학교`

### Level 1: 대분류 (Major Categories)

- **설명:** 대학교에 직접 소속된 최상위 조직들입니다. 루트의 직속 자식 노드입니다.
- **`groupType` 종류:**
    - `COLLEGE`: 단과대학 (예: 공과대학, 인문대학)
    - `STUDENT_COUNCIL`: 총학생회
    - `CENTRAL_CLUB_UNION`: 중앙동아리 연합회 (모든 중앙동아리를 관리하는 컨테이너 그룹)
    - `OTHER_ORGANIZATION`: 기타 독립 기구 (예: 방송국, 신문사)

### Level 2: 중분류 (Sub-categories)

- **설명:** 대분류 그룹에 소속된 하위 조직들입니다.
- **`groupType` 종류:**
    - `DEPARTMENT`: 학과/학부. `COLLEGE`의 자식 노드입니다. (예: 컴퓨터공학과, 경영학과)
    - `COUNCIL_COMMITTEE`: 총학생회 산하 위원회. `STUDENT_COUNCIL`의 자식 노드입니다. (예: 비상대책위원회, 축제준비위원회)
    - `CLUB_DIVISION`: 중앙동아리 분과. `CENTRAL_CLUB_UNION`의 자식 노드입니다. (예: 공연분과, 체육분과, 학술분과)

### Level 3: 개별 그룹 (Individual Groups)

- **설명:** 사용자가 실제로 가입하고 활동하는 단위 그룹입니다. 주로 리프 노드(Leaf Node)에 해당합니다.
- **`groupType` 종류:**
    - `DEPARTMENT_COUNCIL`: 학과 학생회. `DEPARTMENT`의 자식 노드입니다.
    - `ACADEMIC_CLUB`: 학회. `DEPARTMENT`의 자식 노드입니다. (예: 알고리즘 학회, 마케팅 연구회)
    - `CLUB`: 개별 동아리. `CLUB_DIVISION`의 자식 노드입니다. (예: 밴드 동아리 '소리', 축구 동아리 '어시스트')

### 3.1. 하위 그룹: 공식 그룹과 자율 그룹 (Sub-Groups: Official and Autonomous)

개별 그룹(L3) 또는 그 하위에 목적에 따라 공식적인 하위 그룹 또는 자율적인 소모임을 생성할 수 있습니다.

#### 공식 그룹 (Official Group)

- **`groupType`**: `OFFICIAL_SUBGROUP`
- **설명**: 부모 그룹의 공식적인 활동을 위해 생성되는 그룹입니다. 부모 그룹 관리자의 승인이 필요하며, 그룹의 공식 조직도에 표시될 수 있습니다.
- **특징**: 공식적인 대표성, 체계적인 관리, 경우에 따라 예산 지원이나 별도 권한이 부여될 수 있습니다.
- **예시**:
    - `DEPARTMENT` 하위의 '졸업준비위원회', '신입생환영회 준비위원회'.
    - `CLUB` 하위의 '운영진 그룹', '공연 연출팀', '회계팀'.

#### 자율 그룹 (Autonomous Group / 소모임)

- **`groupType`**: `SMALL_GROUP`
- **설명**: 부모 그룹 내 멤버들이 자유롭게 관심사나 특정 단기 목표를 위해 생성하는 비공식 그룹입니다.
- **특징**: 생성 절차가 간소화되어 있거나 없으며, 자율적인 운영을 특징으로 합니다. 주로 멤버 간의 네트워킹이나 스터디 목적으로 사용됩니다.
- **예시**:
    - `DEPARTMENT` 하위의 '코딩 테스트 스터디', '캡스톤 디자인 프로젝트 팀'.
    - `CLUB` 하위의 '주말 등산 팟(번개 모임)', '공모전 준비팀'.

### 4. 트리 구조 시각화 예시

```
- (L0) OO대학교 (ROOT)
  ├─ (L1) 공과대학 (COLLEGE)
  │  └─ (L2) 컴퓨터공학과 (DEPARTMENT)
  │     ├─ (L3) 컴퓨터공학과 학생회 (DEPARTMENT_COUNCIL)
  │     └─ (L3) 알고리즘 학회 '코딩브레인' (ACADEMIC_CLUB)
  ├─ (L1) 인문대학 (COLLEGE)
  │  └─ (L2) 국어국문학과 (DEPARTMENT)
  │     └─ (L3) 국어국문학과 학생회 (DEPARTMENT_COUNCIL)
  ├─ (L1) 총학생회 (STUDENT_COUNCIL)
  │  └─ (L2) 축제준비위원회 (COUNCIL_COMMITTEE)
  └─ (L1) 중앙동아리 연합회 (CENTRAL_CLUB_UNION)
     ├─ (L2) 체육분과 (CLUB_DIVISION)
     │  ├─ (L3) 축구 동아리 '어시스트' (CLUB)
     │  └─ (L3) 농구 동아리 '슬램덩크' (CLUB)
     └─ (L2) 공연분과 (CLUB_DIVISION)
        └─ (L3) 밴드 동아리 '소리' (CLUB)
```

## 5. 그룹 관리 규칙

- **생성:**
    - `ROOT`, `COLLEGE`, `DEPARTMENT` 등 학사 구조와 관련된 그룹은 **시스템 관리자**만 생성/수정할 수 있습니다.
    - `CLUB` (중앙동아리)는 `CENTRAL_CLUB_UNION`의 관리자(동아리 연합회)의 승인을 받아 해당 `CLUB_DIVISION` 하위에 생성됩니다.
    - `ACADEMIC_CLUB` (학회)는 해당 `DEPARTMENT`의 관리자(학과 학생회장 등)의 승인을 받아 `DEPARTMENT` 하위에 생성됩니다.
- **권한:**
    - 각 그룹은 한 명 이상의 **그룹 관리자(Group Admin)**를 가집니다.
    - 상위 그룹의 관리자는 하위 그룹에 대한 관리 권한(예: 멤버 조회, 그룹 정보 수정 요청 승인 등)을 가질 수 있습니다. (정책에 따라 조절 가능)
- **탐색:**
    - API는 특정 그룹 ID를 기준으로 직속 자식 그룹 목록을 조회하는 기능을 제공해야 합니다. (`getChildren(parentId)`)
    - 또한, 전체 트리를 한 번에 로드하거나, 특정 노드까지의 경로(Breadcrumb)를 조회하는 기능도 필요합니다.

## 6. 데이터 모델 및 API 스키마 제안

아래는 그룹 정보를 저장하기 위한 데이터베이스 테이블 또는 API 응답 객체의 제안 스키마입니다.

```json
{
  "groupId": "Long", // 고유 식별자 (Primary Key)
  "groupName": "String", // 그룹 이름 (예: "컴퓨터공학과")
  "groupType": "Enum", // 그룹 종류 (예: "DEPARTMENT")
  "description": "String", // 그룹 상세 설명
  "parentId": "Long", // 부모 그룹의 ID. 루트의 경우 null.
  "path": "String", // 경로 탐색 최적화를 위한 Materialized Path (예: "/1/3/15/")
  "memberCount": "Integer", // 소속 멤버 수
  "iconUrl": "String", // 그룹 대표 아이콘 또는 로고 이미지 URL
  "createdAt": "DateTime",
  "updatedAt": "DateTime"
}
```

**`path` 필드 설명:**
Materialized Path 패턴은 부모-자식 관계를 문자열 경로로 저장하여 특정 노드의 모든 하위 노드를 검색하거나, 특정 노드의 상위 경로를 찾을 때 재귀 쿼리 없이 효율적으로 조회할 수 있게 돕는 데이터베이스 설계 기법입니다.

---