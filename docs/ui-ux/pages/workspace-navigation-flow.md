# 워크스페이스 네비게이션 플로우 (Workspace Navigation Flow)

본 문서는 워크스페이스 진입 시의 특수한 네비게이션 플로우와 모바일/반응형 동작을 정의합니다.

## 개요

워크스페이스는 다른 일반 페이지와는 다른 독자적인 UI 플로우를 가집니다. 좌측 네비게이션 바가 축소되고, 채널 네비게이션 바가 새로 나타나는 등의 특수한 동작이 포함됩니다.

## 1. 워크스페이스 진입 시나리오

### 1.1. 진입 경로

-   사용자가 좌측 네비게이션 바에서 '워크스페이스'를 클릭하거나
-   '홈' 등 다른 페이지에서 특정 그룹에 진입하는 액션을 취할 때

### 1.2. 좌측 네비게이션 바 변화

-   **애니메이션**: 좌측 네비게이션 바는 **축소되는 애니메이션**과 함께 너비가 좁아집니다.
-   **축소 상태**:
    -   페이지 이름과 설명은 사라지고 **아이콘만** 남습니다.
    -   축소된 바의 너비는 상단 바의 '뒤로가기' 버튼 영역의 너비와 일치하여 시각적 통일성을 부여합니다.

### 1.3. 워크스페이스 초기 뷰 (웹)

-   워크스페이스 진입 시, 채널 목록 중 **가장 상단에 위치한 첫 번째 채널**의 내용이 기본으로 표시됩니다.

## 2. 채널 네비게이션 바

### 2.1. 상세 구조

기존 페이지 콘텐츠 영역에는 **채널 네비게이션 바**가 새로 나타나며, 그 구조는 다음과 같습니다:

-   **그룹 메뉴 (상단)**
    -   그룹 홈
    -   캘린더
-   **채널 (중단)**
    -   사용자가 접근 권한을 가진 채널 목록이 표시됩니다.
    -   **읽지 않음 표시**: 읽지 않은 게시글이 있는 채널 옆에는 **숫자 배지(Badge)**로 개수를 표시합니다. 사용자가 해당 채널을 조회하면 이 배지는 사라집니다.
-   **그룹 관리 (하단)**
    -   현재 사용자가 그룹 관리 권한을 가진 경우에만 **그룹 관리** 버튼이 표시됩니다.
    -   이 버튼을 클릭하면, `workspaceStateProvider`의 `showGroupAdminPage` 함수가 호출되어 메인 컨텐츠 영역에 그룹 관리 페이지가 표시됩니다.

## 3. 게시글 및 댓글 기능

### 3.1. 게시글 작성 및 권한

-   **게시글 입력창**: 워크스페이스 채널 뷰 하단에는 현재 선택된 채널에 게시글을 작성할 수 있는 입력창이 생깁니다. 이 입력창의 영역은 좌측의 채널 네비게이션 바를 침범하지 않습니다.
-   **권한 처리**: 만약 현재 채널에서 사용자에게 게시글 작성 권한이 없는 경우, 게시글 입력창은 **비활성화 상태**로 표시되어야 합니다.

### 3.2. 댓글 기능 플로우

-   **댓글 창 열기**: 각 게시글 하단의 '댓글 작성' 버튼을 클릭하면, 우측에서 **사이드 바 형태의 댓글 창**이 슬라이드되어 나타납니다.
-   **레이아웃 조정**: 댓글 창이 나타날 때, 기존 게시글 목록이 표시되는 메인 콘텐츠 뷰의 너비는 줄어들어 댓글 창과 나란히 표시됩니다. 상단 네비게이션 바는 영향을 받지 않습니다.
-   **댓글 창 구조**:
    -   상단: 해당 게시글의 댓글들이 시간순으로 표시됩니다.
    -   하단: 게시글 입력창과 동일한 형태의 **댓글 입력창**이 위치합니다.

### 3.3. 입력 필드 및 상단 바

**텍스트 입력** (게시글/댓글 공통): 자동 높이 조절 (최대 5줄), Shift+Enter (줄 바꿈), Enter (전송), 전송 후 필드 초기화
**브레드크럼**: 상단 바는 유지, 브레드크럼만 업데이트. 워크스페이스 진입 시 "워크스페이스 > 컴퓨터공학과", 채널 선택 시 "워크스페이스 > 컴퓨터공학과 > 공지사항"

## 4. 모바일 네비게이션

### 4.1. 플로우

웹의 좌측 네비게이션 바는 모바일에서 하단 네비게이션 바로 대체됩니다. 워크스페이스 진입 시 화면 전체가 단계적으로 전환됩니다.

1. **채널 네비게이션 뷰**: 채널 목록 표시, 읽지 않은 게시글이 있는 채널에 숫자 배지 표시
2. **게시글 뷰**: 채널 선택 시 게시글 목록 전환, 배지 사라짐
3. **댓글 뷰**: 댓글 버튼 클릭 시 전체 화면 댓글 목록 및 입력창 전환

상단 바는 유지되며 페이지 정보만 동적 변경됩니다.

### 4.2. 브레드크럼

채널 목록: "워크스페이스" | 게시글 목록: "그룹명 > 채널명" (예: 컴퓨터공학과 > 공지사항) | 댓글 화면: "댓글"

디자인 원칙 "Easy to Answer"를 따라 사용자가 현재 위치를 직관적으로 파악할 수 있도록 합니다.

## 5. 반응형 컨텍스트 유지

화면 크기 변경 시 사용자의 현재 컨텍스트가 유지되어야 합니다.

**웹 → 모바일**: 채널 게시글 보던 중 전환 시 해당 채널 게시글 뷰 표시. 댓글 사이드 바 열린 상태에서 전환 시 전체 화면 댓글 뷰 표시
**모바일 → 웹**: 댓글 뷰 보던 중 전환 시 댓글 사이드 바가 열린 웹 뷰 표시
**뒤로가기**: 모바일 순서는 `댓글 뷰` → `게시글 뷰` → `채널 네비게이션 뷰`

## 관련 문서

- [네비게이션 및 페이지 플로우](navigation-and-page-flow.md) - 기본 네비게이션 구조
- [워크스페이스 페이지](workspace-pages.md) - 워크스페이스 전체 구조
- [워크스페이스 채널 뷰](workspace-channel-view.md) - 채널 및 게시글 시스템
- [디자인 시스템](../concepts/design-system.md) - 디자인 원칙 및 토큰
