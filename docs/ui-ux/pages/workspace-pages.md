# UI/UX 명세서: 워크스페이스 콘텐츠 페이지

본 문서는 워크스페이스 내부의 주요 콘텐츠 페이지(채널, 그룹 홈, 그룹 캘린더)의 구조와 기능을 정의합니다. 이 페이지들은 워크스페이스의 좌측/모바일 네비게이션을 통해 전환되는 '콘텐츠 페이지' 영역에 해당합니다.

## 구현 현황

### 완료된 기능 (2025-10-04)

**채널 네비게이션 시스템**
- 채널 목록 API 연동 (`/workspaces/{workspaceId}/channels`)
- 멤버십 권한 확인 API 연동 (`/groups/{groupId}/members/me`)
- 슬라이드 애니메이션 (160ms, 왼쪽→오른쪽, 50ms 지연)
- 읽지 않음 배지 표시 (더미 데이터)
- 그룹 홈 / 캘린더 / 채널 뷰 전환
- 관리자 페이지 버튼 (조건부: hasAnyGroupPermission)

**워크스페이스 자동 진입**
- 최상위 그룹 자동 선택 (level 최소 → id 최소)
- 소속 그룹 없을 시 빈 상태 UI 표시
- "그룹 탐색하기" 버튼으로 /home 이동

**구현 파일**
- `/frontend/lib/core/models/channel_models.dart` - Channel, MembershipInfo 모델
- `/frontend/lib/core/models/group_models.dart` - GroupMembership 모델
- `/frontend/lib/core/services/channel_service.dart` - 채널 API 서비스
- `/frontend/lib/core/services/group_service.dart` - 그룹 API 서비스
- `/frontend/lib/presentation/widgets/workspace/channel_navigation.dart` - 채널 네비게이션
- `/frontend/lib/presentation/widgets/workspace/channel_item.dart` - 채널 아이템
- `/frontend/lib/presentation/widgets/workspace/unread_badge.dart` - 읽지 않음 배지
- `/frontend/lib/presentation/widgets/navigation/sidebar_navigation.dart` - 워크스페이스 자동 진입
- `/frontend/lib/presentation/providers/workspace_state_provider.dart` - 상태 관리
- `/frontend/lib/presentation/pages/workspace/workspace_page.dart` - 워크스페이스 페이지

### 향후 개선 사항

**읽지 않음 카운트 API**
현재 더미 데이터 사용 중. 백엔드 API 구현 필요.

제안 엔드포인트:
- `GET /channels/{channelId}/unread-count` - 개별 채널 읽지 않음 카운트
- 또는 채널 목록 API에 `unreadCount` 필드 포함

**워크스페이스 ID 조회**
현재 `workspaceId = groupId`로 가정하고 있음. 실제로는 그룹 정보에서 워크스페이스 ID를 조회해야 함.

제안:
- 그룹 상세 API 응답에 `workspaceId` 필드 추가
- 또는 `GET /groups/{groupId}/workspace` 엔드포인트 활용

## 1. 채널 페이지

채널은 그룹 멤버들이 메시지 형식으로 소통하는 핵심 공간입니다.

### 1.1. 기본 구조 및 플로우

-   **진입**: 사용자가 채널 네비게이션에서 특정 채널을 선택하면, 권한 확인 후 해당 채널의 게시글 목록을 표시합니다.
-   **스크롤**: 기본적으로 가장 최신 게시글(가장 아래)이 보이도록 스크롤이 맨 아래로 이동합니다.
-   **모바일**: `navigation-and-page-flow.md`에 정의된 전체 화면 전환 플로우를 따릅니다.

### 1.2. 게시글 구성 요소

게시글은 제목과 내용을 구분하지 않는 연속적인 메시지 형태입니다.

1.  **작성자 정보**: 좌측에 작성자의 프로필 이미지, 우측 상단에 닉네임과 작성 시간(예: "오후 3:15")을 표시합니다.
2.  **날짜 구분선**: 날짜가 바뀔 경우, 게시글 사이에 "── 2025년 9월 29일 ──"과 같은 구분선을 삽입하여 시각적으로 분리합니다.
3.  **메시지 본문**: 텍스트 기반의 메시지를 표시합니다.
4.  **댓글 버튼**: 게시글 하단에 테두리가 투명한 좌우로 긴 직사각형 버튼을 배치합니다. 
    -   **댓글이 없을 때**: "댓글 작성하기" 텍스트를 표시합니다.
    -   **댓글이 있을 때**: "N개의 댓글 • M분 전" 형식으로 댓글 수와 마지막 댓글이 달린 시간을 함께 표시합니다.
    -   **마우스 호버 시**: "댓글 펼치기"로 텍스트가 변경되어 행동을 유도합니다.

## 2. 그룹 홈 페이지

그룹의 현황을 한눈에 파악할 수 있는 대시보드 역할을 합니다.

### 2.1. 디자인 컨셉 (아이디어 초안)

-   **가독성**: 중요한 정보를 시각적인 카드 형태로 그룹화하여 사용자가 빠르게 스캔할 수 있도록 합니다.
-   **동기 부여**: 그룹의 활발한 활동을 보여주어 멤버들의 참여를 유도합니다.

### 2.2. 구성 요소 (아이디어 초안)

1.  **헤더**: "OO 그룹 홈"과 같이 그룹의 이름을 명확히 보여줍니다.

2.  **핵심 지표 카드 (Key Metrics)**: 상단에 3-4개의 핵심 정보를 카드 형태로 나열합니다.
    -   **총 멤버**: 👥 아이콘과 함께 "N명" 표시.
    -   **이번 주 일정**: 🗓️ 아이콘과 함께 "N개" 표시. 클릭 시 캘린더로 이동.
    -   **새로운 소식**: 🔔 아이콘과 함께 "N개" 표시. 읽지 않은 중요 공지나 알림 수를 나타냅니다.

3.  **다가오는 일정 (Upcoming Events)**:
    -   가장 가까운 순서로 2-3개의 일정을 리스트 형태로 보여줍니다.
    -   각 항목은 [일정 제목], [날짜/시간], [참석 대상]을 간략히 표시합니다.
    -   하단에 "캘린더에서 모두 보기" 링크를 제공합니다.

4.  **최근 활동 피드 (Recent Activity)**:
    -   그룹 내의 최근 활동을 시간순으로 보여줍니다.
    -   "O_O님이 '정기 회의' 채널에 새 글을 작성했습니다."
    -   "△△△님이 그룹에 새로 가입했습니다."
    -   "그룹 정보가 업데이트되었습니다."

## 3. 그룹 캘린더 페이지

그룹 멤버들의 공통 일정과 예약 가능한 장소의 일정을 관리합니다.

### 3.1. 기본 구조 및 플로우

-   **뷰 선택**: 상단에 "그룹 일정"과 "장소 일정"을 선택할 수 있는 탭(Tab)을 제공합니다.
-   **기본 뷰**: 월별(Monthly) 캘린더를 기본으로 보여줍니다.
-   **상세 뷰**: 월별 캘린더에서 특정 주(Week) 영역을 클릭하면, 해당 주가 확대되며 시간대별(Weekly) 뷰로 전환됩니다.
-   **일정 추가**: 화면 우측 상단에 `+` 아이콘 버튼을 두어 새 일정을 추가할 수 있게 합니다.
-   **일정 상세 조회**: 캘린더에 표시된 일정을 클릭하면, 해당 일정의 상세 정보(제목, 시간, 장소, 참석자 목록 등)를 보여주는 팝업 또는 사이드 패널이 나타납니다. 이 곳에서 사용자는 자신의 참석 여부(참석/불참 등)를 선택할 수 있습니다.

### 3.2. 일정 추가 기능 (아이디어 초안 포함)

`calendar-system.md` 컨셉을 기반으로 다음 플로우를 제안합니다.

1.  **기본 정보 입력**:
    -   일정 제목
    -   참석 대상 선택 (그룹 전체, 특정 역할, 개별 선택 등)
    -   장소/자원 선택 (회의실, 노트북 등)

2.  **시간 설정 방식 선택**:
    -   사용자는 아래 두 가지 방식 중 하나를 선택할 수 있습니다.
        a. **시간 추천 받기 (AI 기반)**
        b. **직접 시간 선택**

3.  **시간 추천 기능 상세 (아이디어)**:
    -   '시간 추천 받기' 선택 시, 팝업 또는 새 섹션이 나타납니다.
    -   시스템은 선택된 참석자들과 장소의 스케줄을 분석하여 모두가 가능한 시간대를 **캘린더 위에 시각적으로 하이라이트** 처리합니다.
    -   "가장 좋은 시간대" 목록을 2-3개 제안합니다. (예: "1. 월요일 14:00-15:00 (전원 참석 가능)", "2. 화요일 10:00-11:00 (9/10명 참석 가능)")
    -   사용자는 제안된 시간 중 하나를 클릭하여 바로 선택할 수 있습니다.

4.  **직접 시간 선택 상세**:
    -   일반적인 날짜/시간 범위 선택기(Date/Time Range Picker)를 제공합니다.
    -   시간을 선택하는 동안, 선택된 참석자/장소와 시간이 겹칠 경우 "O_O님과 시간이 겹쳐요" 또는 "해당 시간에 회의실 사용 불가"와 같은 **실시간 피드백**을 표시해줍니다.

5.  **최종 확인 및 추가**: 모든 정보 입력 후 '추가' 버튼을 누르면 일정이 생성되고 참석자들에게 알림이 갑니다.

### 3.3. 채널 게시글 연동

캘린더 일정을 채널 게시글과 연동하여 멤버들의 접근성과 참여율을 높입니다.

1.  **게시글 작성 선택**: 일정 생성이 완료되는 마지막 단계에서, 사용자에게 "채널에 게시글로 알리기"와 같은 선택지를 제공합니다.
2.  **채널 및 내용 입력**: 사용자가 게시글 작성을 선택하면,
    -   자신이 글 작성 권한을 가진 채널 목록이 표시되며, 이 중 하나를 선택합니다.
    -   게시글에 추가할 내용을 자유롭게 입력할 수 있는 텍스트 필드가 제공됩니다.
3.  **게시글 자동 생성**: '작성 완료' 시, 선택한 채널에 다음과 같은 구조의 게시글이 생성됩니다.
    -   **상단 (일정 정보 박스)**: 일정의 핵심 정보(제목, 시간, 장소 등)가 요약된 박스가 표시됩니다. 이 박스를 클릭하면 캘린더의 해당 일정 상세 보기로 바로 이동할 수 있습니다.
    -   **중단 (사용자 입력 내용)**: 사용자가 2번 단계에서 입력한 내용이 표시됩니다.
    -   **하단 (액션 버튼)**: `concepts/calendar-system.md` 명세에 따라, 해당 일정의 종류에 맞는 버튼(예: `[참석]`, `[불참]`, `[신청하기]`)이 자동으로 표시되어 사용자가 게시글 내에서 즉시 상호작용할 수 있습니다.
