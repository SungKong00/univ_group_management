# 워크스페이스 페이지 (Workspace Pages)

## 개요

그룹 내 실제 활동이 이루어지는 워크스페이스 관련 페이지들의 기능적 요구사항과 사용자 경험을 정의합니다.

## 워크스페이스 메인 화면 (WorkspaceScreen)

### 기능 목적
- 그룹 내 모든 활동의 중심 허브
- 채널별 대화 및 컨텐츠 관리
- 멤버 간 효율적인 소통 도구 제공

### 전체 레이아웃 구조

#### 데스크톱 (≥ 900px)
```
[상단바 - 그룹명 | 현재 채널명]
[워크스페이스 사이드바] [메인 컨텐츠] [멤버/정보 사이드바]
```

#### 모바일 (< 900px)
```
[상단바 - 그룹명 > 채널명]
[메인 컨텐츠]
[하단 네비게이터] (필요 시 표시)
```

### 3-패널 시스템

#### 1. 워크스페이스 사이드바 (200px)
**채널 목록 섹션**
- 공지사항 채널 (항상 최상단)
- 일반 채널들 (생성순/알파벳순)
- 읽지 않은 메시지 배지
- 채널별 타입 아이콘 (텍스트/음성/공지)

**빠른 액션 섹션**
- 새 채널 만들기 (권한 있는 경우)
- 채널 검색
- 즐겨찾기 채널

**그룹 정보 섹션**
- 그룹 설정 (권한별 표시)
- 멤버 관리 (관리자만)
- 나가기/삭제 옵션

#### 2. 메인 컨텐츠 영역
**채널 헤더**
- 채널명, 설명, 멤버 수
- 채널 설정 버튼 (권한별)
- 검색 및 필터 옵션

**게시글 목록**
- 시간순 정렬 (최신 순)
- 고정 게시글 최상단 표시
- 무한 스크롤 페이지네이션

**메시지 컴포저**
- 텍스트 입력 영역
- 파일 첨부 버튼
- 전송 버튼 및 단축키 (Ctrl+Enter)

#### 3. 멤버/정보 사이드바 (선택적 표시)
**멤버 목록**
- 온라인/오프라인 상태
- 역할별 그룹핑
- 프로필 빠른 보기

**채널 정보**
- 채널 설명 상세
- 고정된 메시지
- 파일 및 링크 모음

### 모바일 네비게이션 패턴

#### 네비게이터 표시 조건
- 워크스페이스 진입 시 기본 표시
- 채널 내용 집중 시 자동 숨김
- 뒤로가기 버튼으로 다시 표시

#### 네비게이터 구성
```
[채널 목록] [멤버 목록] [그룹 정보]
```

#### 상태별 뒤로가기 동작
1. **댓글 사이드바 열림** → 댓글 닫기
2. **네비게이터 숨김** → 네비게이터 표시
3. **기본 상태** → 워크스페이스 목록으로

### 실시간 기능

#### 메시지 실시간 업데이트
- 새 게시글 자동 추가
- 읽음 상태 실시간 반영
- 타이핑 인디케이터 표시

#### 멤버 상태 표시
- 온라인/오프라인 상태
- 현재 보고 있는 채널 표시
- 최근 활동 시간

### 알림 및 배지 시스템

#### 읽지 않은 메시지
- 채널별 개수 배지
- 멘션된 메시지 별도 표시
- 중요 공지 강조 표시

#### 푸시 알림 연동
- 멘션 시 즉시 알림
- 중요 공지 알림
- 사용자 설정에 따른 필터링

---

## 채널 상세 화면 (ChannelDetailScreen)

### 기능 목적
- 특정 채널 내 모든 컨텐츠 관리
- 게시글과 댓글의 체계적 표시
- 채널별 설정 및 권한 관리

### 게시글 표시 시스템

#### 게시글 버블 (PostBubble)
**기본 정보 표시**
- 작성자 프로필 이미지 및 이름
- 작성 시간 (상대적/절대적 시간)
- 게시글 내용 (마크다운 지원)
- 첨부 파일 미리보기

**상호작용 요소**
- 좋아요 버튼 및 개수
- 댓글 개수 및 댓글 보기 버튼
- 공유/링크 복사
- 수정/삭제 (본인 글만)

**상태 표시**
- 고정 게시글 핀 아이콘
- 중요 공지 강조 배경
- 편집됨 표시

#### 댓글 시스템 (CommentsView)

**댓글 토글 버튼**
- 댓글 개수와 함께 표시
- 클릭 시 해당 게시글 댓글 영역 확장
- 모바일에서는 사이드바로 표시

**댓글 목록 (CommentTile)**
- 작성자 정보 (이름, 시간)
- 댓글 내용
- 대댓글 지원 (들여쓰기 표시)
- 좋아요 및 답글 버튼

**댓글 작성**
- 인라인 댓글 입력기
- 대댓글 작성 시 원 댓글 표시
- 실시간 미리보기

### 빈 상태 처리 (EmptyState)

#### 채널 첫 진입
**환영 메시지**
- 채널 설명 및 용도 안내
- 첫 게시글 작성 유도
- 채널 규칙 및 가이드라인

#### 게시글 없음
**콘텐츠 생성 유도**
- "첫 번째 게시글을 작성해보세요"
- 게시글 작성 버튼 강조
- 채널 활용 팁 제공

#### 댓글 없음
**참여 유도 메시지**
- "첫 번째 댓글을 남겨보세요"
- 댓글 작성란 자동 포커스
- 댓글 에티켓 안내

### 메시지 컴포저 (MessageComposer)

#### 기본 기능
**텍스트 입력**
- 멀티라인 지원
- 자동 크기 조절 (최대 5줄)
- 마크다운 문법 지원

**파일 첨부**
- 드래그 앤 드롭 업로드
- 이미지 미리보기
- 파일 크기 제한 안내

**전송 옵션**
- Enter: 줄바꿈
- Ctrl+Enter: 전송
- 전송 버튼 클릭

#### 고급 기능
**멘션 시스템**
- @username 자동완성
- 멘션된 사용자 하이라이트
- 멘션 알림 발송

**이모지 지원**
- 이모지 피커 제공
- 자주 사용하는 이모지 우선 표시
- 커스텀 이모지 (향후 확장)

### 검색 및 필터링

#### 채널 내 검색
- 전체 텍스트 검색
- 작성자별 필터
- 날짜 범위 필터
- 파일 타입별 필터

#### 정렬 옵션
- 최신순 (기본)
- 인기순 (좋아요 기준)
- 댓글 많은 순
- 관련도순 (검색 시)

---

## 그룹 관리 페이지들

### 그룹 정보 화면 (GroupInfoScreen)

#### 기능 목적
- 그룹의 공개 정보 표시
- 가입 상태 관리
- 그룹 통계 및 활동 현황

#### 주요 정보 표시
**그룹 개요**
- 그룹명, 설명, 프로필 이미지
- 소속 대학/학과 정보
- 그룹 유형 및 공개 설정
- 생성일 및 오너 정보

**활동 통계**
- 전체 멤버 수
- 온라인 멤버 수
- 오늘/이번 주 활동량
- 인기 채널 순위

**가입 관리**
- 현재 가입 상태 표시
- 가입 신청/취소 버튼
- 탈퇴 옵션 (멤버인 경우)

### 멤버 관리 화면 (MemberPermissionScreen)

#### 기능 목적 (관리자 전용)
- 그룹 멤버들의 전체적 관리
- 역할 및 권한 설정
- 가입 신청 승인/거부

#### 멤버 목록 관리
**현재 멤버**
- 프로필 정보 (이름, 이메일, 가입일)
- 현재 역할 및 권한 표시
- 역할 변경 드롭다운
- 강제 탈퇴 버튼

**가입 신청자**
- 신청자 프로필 정보
- 가입 신청 메시지
- 승인/거부 버튼
- 일괄 처리 옵션

#### 역할 관리
**시스템 역할**
- Owner: 모든 권한 (변경 불가)
- Member: 기본 권한 (변경 불가)

**커스텀 역할**
- 역할명 및 설명 편집
- 권한 조합 설정
- 우선순위 설정
- 역할 삭제 (멤버 자동 이동)

### 역할 관리 화면 (RoleManagementScreen)

#### 기능 목적 (관리자 전용)
- 커스텀 역할 생성 및 편집
- 권한 조합 관리
- 역할별 멤버 할당

#### 역할 편집 인터페이스
**기본 정보**
- 역할명 (최대 50자)
- 역할 설명 (최대 200자)
- 우선순위 설정

**권한 선택**
- 그룹 권한 체크박스 목록
- 권한별 설명 툴팁
- 권한 조합 미리보기

**멤버 할당**
- 현재 역할 멤버 목록
- 다른 역할에서 이동
- 일괄 할당 기능

### 그룹 설정 화면 (GroupSettingsScreen)

#### 기능 목적 (오너 전용)
- 그룹 기본 정보 수정
- 공개 설정 및 가입 정책
- 그룹 삭제 및 소유권 이전

#### 기본 정보 설정
**그룹 프로필**
- 그룹명 수정
- 설명 편집
- 프로필 이미지 변경
- 태그 관리

**소속 정보**
- 대학교/학과 변경
- 그룹 유형 수정
- 계층 구조 조정

#### 가입 설정
**공개 범위**
- PUBLIC: 누구나 검색 및 가입 가능
- PRIVATE: 초대만 가능
- INVITE_ONLY: 승인 후 가입

**가입 정책**
- 자동 승인 여부
- 최대 멤버 수 제한
- 가입 조건 설정

#### 고급 설정
**그룹 관리**
- 소유권 이전
- 그룹 비활성화
- 그룹 완전 삭제

**데이터 관리**
- 그룹 백업 생성
- 멤버 데이터 내보내기
- 활동 통계 다운로드

---

## 워크스페이스 컴포넌트들

### 채널 앱바 (ChannelAppBar)

#### 기능 구성
**제목 영역 (ChannelAppBarTitle)**
- 현재 채널명 표시
- 채널 설명 툴팁
- 채널 유형 아이콘

**액션 영역 (ChannelAppBarActions)**
- 검색 버튼
- 멤버 목록 토글
- 채널 설정 (권한별)
- 알림 설정

### 빈 상태 컴포넌트 (WorkspaceEmptyState)

#### 상황별 메시지
**그룹 미선택**
- "워크스페이스를 선택해주세요"
- 그룹 목록으로 이동 버튼

**채널 없음**
- "첫 번째 채널을 만들어보세요"
- 채널 생성 가이드

**권한 없음**
- "이 채널에 접근할 권한이 없습니다"
- 관리자 문의 안내

### 성능 최적화 전략

#### 무한 스크롤
- 30개씩 페이지네이션
- 스크롤 위치 기억
- 이전 데이터 캐싱

#### 이미지 최적화
- 지연 로딩
- 썸네일 생성
- 압축 및 리사이징

#### 실시간 업데이트
- WebSocket 연결 관리
- 백그라운드 동기화
- 연결 상태 표시

---

## 관련 구현 파일

### 메인 워크스페이스
- `frontend/lib/presentation/screens/workspace/workspace_screen.dart`
- `frontend/lib/presentation/screens/workspace/channel_detail_screen.dart`

### 관리 화면들
- `frontend/lib/presentation/screens/workspace/group_info_screen.dart`
- `frontend/lib/presentation/screens/workspace/member_permission_screen.dart`
- `frontend/lib/presentation/screens/workspace/role_management_screen.dart`
- `frontend/lib/presentation/screens/workspace/group_settings_screen.dart`

### 컴포넌트들
- `frontend/lib/presentation/screens/workspace/components/`
  - `channel_app_bar/`
  - `channel_posts/`
  - `channel_comments/`
  - `channel_composer/`
  - `workspace_empty_state.dart`

### 관련 Provider
- `WorkspaceProvider`: 워크스페이스 상태 관리
- `ChannelProvider`: 채널 상태 관리
- `UIStateProvider`: UI 상태 관리

### 관련 문서
- [메인 네비게이션 페이지](main-navigation-pages.md)
- [컴포넌트 가이드](../component-guide.md)
- [실시간 기능 가이드](../realtime-features.md)