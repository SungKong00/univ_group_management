# 메인 네비게이션 페이지 (Main Navigation Pages)

## 개요

앱의 핵심 탐색 구조를 담당하는 메인 네비게이션 시스템과 각 탭 페이지들의 기능적 요구사항을 정의합니다.

## 메인 네비게이션 스캐폴드 (MainNavScaffold)

### 기능 목적
- 앱 전체의 네비게이션 허브 역할
- 데스크톱과 모바일에 최적화된 반응형 레이아웃 제공
- 복잡한 상태 관리를 통한 seamless한 화면 전환

### 네비게이션 구조
```
홈 (Home) → 워크스페이스 (Workspace) → 나의 활동 (Activity) → 프로필 (Profile)
     ↓
  그룹 탐색
     ↓
  워크스페이스 진입
```

### 반응형 레이아웃 전략

#### 데스크톱 (≥ 900px)
**3단 레이아웃**
```
[상단바 - 전체 너비]
[글로벌 사이드바] [메인 컨텐츠]
```

**상단바 구성**
- 뒤로가기 버튼 (상황별 표시)
- 현재 페이지/상태 제목
- 알림 버튼

**글로벌 사이드바**
- 고정 너비 (60px)
- 탭 아이콘들 세로 배치
- 현재 선택된 탭 시각적 강조

#### 모바일 (< 900px)
**기존 모바일 패턴**
```
[상단 앱바]
[메인 컨텐츠]
[하단 네비게이션바]
```

**하단 네비게이션바**
- 4개 탭 고정
- 아이콘 + 라벨 조합
- 선택된 탭 색상 강조

### 상태 관리 복잡성

#### 홈 탭 상태
1. **기본 홈 화면**: 대시보드 및 최근 활동
2. **그룹 탐색 모드**: 교내 그룹 트리 뷰
3. **워크스페이스 모드**: 특정 그룹의 워크스페이스

#### 워크스페이스 탭 상태
1. **워크스페이스 목록**: 내가 속한 그룹들
2. **워크스페이스 모드**: 특정 그룹의 워크스페이스

#### 교차 탭 네비게이션
- 홈 탭의 그룹 탐색에서 워크스페이스 진입 시 자동으로 워크스페이스 탭으로 이동
- 진입점 기록을 통한 적절한 뒤로가기 동작

### 뒤로가기 버튼 로직

#### 표시 조건
- 홈 탭 기본 상태에서만 숨김
- 나머지 모든 상태에서 표시

#### 동작 분기
1. **그룹 탐색 모드**: 홈으로 복귀
2. **워크스페이스 모드 (워크스페이스 탭 진입)**: 워크스페이스 목록으로
3. **워크스페이스 모드 (홈 탭 진입)**: 그룹 탐색으로

### 성능 최적화

#### IndexedStack 사용
- 모든 탭 페이지를 메모리에 유지
- 탭 전환 시 즉시 표시
- 각 탭의 스크롤 위치 및 상태 보존

#### 조건부 렌더링
- 워크스페이스 모드에서는 별도 레이아웃 사용
- 불필요한 위젯 트리 생성 방지

---

## 홈 탭 (HomeTab)

### 기능 목적
- 사용자의 일일 활동 허브
- 소속 그룹들의 최신 소식 한눈에 확인
- 새로운 그룹 발견 및 가입 유도

### 3가지 모드

#### 1. 기본 홈 대시보드
**핵심 정보 영역**
- 내 그룹 요약 카드들
- 최근 알림 및 활동
- 오늘의 할 일 / 중요 공지

**빠른 액션 영역**
- 새 그룹 만들기
- 그룹 검색
- 교내 그룹 탐색 진입

**추천 및 발견 영역**
- 관심사 기반 그룹 추천
- 같은 학과 인기 그룹
- 최근 활성화된 그룹

#### 2. 그룹 탐색 모드
**트리 구조 네비게이션**
- 대학교 → 단과대학 → 학과 → 세부 그룹
- 각 레벨별 확장/축소 가능
- 현재 위치 breadcrumb 표시

**그룹 정보 카드**
- 그룹명, 멤버 수, 활성도
- 최근 게시글 미리보기
- 가입 상태 및 액션 버튼

**검색 및 필터**
- 그룹명 실시간 검색
- 카테고리별 필터링
- 인기도/최신순 정렬

#### 3. 워크스페이스 모드 (레거시)
- 특정 그룹의 워크스페이스 전체 화면 표시
- 현재는 워크스페이스 탭으로 자동 이동되도록 구현

### 사용자 플로우

#### 신규 사용자
1. 홈 진입 → 가입 권유 및 그룹 추천
2. "교내 그룹 탐색" 버튼 → 트리 뷰에서 관심 그룹 발견
3. 그룹 정보 확인 → 가입 신청 → 워크스페이스 접근

#### 기존 사용자
1. 홈 진입 → 소속 그룹들의 최신 활동 확인
2. 특정 그룹 카드 클릭 → 해당 워크스페이스로 이동
3. 새로운 그룹 관심 → 그룹 탐색 → 추가 가입

### UI 컴포넌트 구성

#### 그룹 카드 컴포넌트
- 그룹 이미지, 이름, 멤버 수
- 읽지 않은 알림 배지
- 최근 활동 타임스탬프
- 즐겨찾기 토글

#### 활동 피드 컴포넌트
- 타임라인 형태의 최근 활동
- 그룹별 색상 구분
- 중요도 기반 우선순위 표시

---

## 워크스페이스 탭 (WorkspaceTab)

### 기능 목적
- 내가 속한 모든 그룹의 워크스페이스 관리
- 그룹별 역할 및 권한 상태 한눈에 확인
- 효율적인 워크스페이스 간 전환

### 2가지 모드

#### 1. 워크스페이스 목록 모드
**내 그룹 목록**
- 가입한 모든 그룹 표시
- 그룹별 역할 (오너, 스태프, 멤버) 표시
- 읽지 않은 메시지 수 배지

**그룹 카드 정보**
- 그룹 이미지 및 이름
- 내 역할 및 권한 레벨
- 최근 활동 요약
- 바로가기 액션 (메시지, 설정 등)

**정렬 및 필터**
- 최근 활동순, 이름순, 가입일순
- 역할별 필터링 (관리 그룹만 보기)
- 즐겨찾기 그룹 상단 고정

#### 2. 워크스페이스 모드
- 선택한 그룹의 전체 워크스페이스 표시
- 채널 목록, 멤버 목록, 메인 컨텐츠 영역
- 해당 그룹에서의 모든 활동 가능

### 권한 기반 UI 표시

#### 일반 멤버
- 기본 채널 접근
- 게시글 읽기/쓰기
- 댓글 작성

#### 스태프/관리자
- 멤버 관리 버튼 표시
- 채널 관리 옵션
- 그룹 설정 접근

#### 오너
- 모든 관리 기능 접근
- 그룹 삭제 옵션
- 소유권 이전 기능

### 성능 최적화

#### 지연 로딩
- 워크스페이스 진입 시점에 데이터 로드
- 스크롤 기반 페이지네이션
- 이미지 지연 로딩

#### 캐싱 전략
- 최근 방문한 워크스페이스 캐시
- 오프라인 상태에서 기본 정보 표시
- 네트워크 연결 시 자동 동기화

---

## 나의 활동 탭 (ActivityTab)

### 기능 목적
- 내 모든 활동 이력 중앙 집중식 관리
- 작성한 게시글, 댓글, 참여 이력 확인
- 개인 통계 및 성취 확인

### 주요 섹션

#### 최근 활동
- 오늘/어제/이번 주 활동 타임라인
- 게시글 작성, 댓글, 좋아요, 가입 등
- 각 활동별 해당 위치로 바로가기

#### 내 게시글 관리
- 작성한 모든 게시글 목록
- 그룹별, 날짜별 필터링
- 수정/삭제 빠른 액션

#### 참여 그룹 이력
- 가입/탈퇴 이력
- 역할 변경 이력
- 그룹별 활동 통계

### 사용자 인사이트

#### 활동 통계
- 월별 게시글/댓글 수
- 가장 활발한 그룹
- 받은 좋아요/반응 수

#### 성취 시스템
- 활동 기반 배지 획득
- 연속 활동일 기록
- 커뮤니티 기여도 점수

---

## 프로필 탭 (ProfileTab)

### 기능 목적
- 개인 정보 관리 및 설정
- 계정 보안 및 프라이버시 제어
- 앱 설정 및 사용법 안내

### 주요 섹션

#### 프로필 정보
- 프로필 이미지, 이름, 닉네임
- 소속 대학/학과 정보
- 자기소개 및 관심사

#### 계정 설정
- 이메일 인증 상태
- 알림 설정 (푸시, 이메일)
- 프라이버시 설정

#### 앱 설정
- 테마 설정 (라이트/다크)
- 언어 설정
- 캐시 관리

#### 고객 지원
- 자주 묻는 질문
- 문의하기
- 버전 정보

### 개인정보 보호

#### 공개 범위 설정
- 프로필 정보 공개 수준
- 활동 이력 표시 여부
- 검색 허용 설정

#### 데이터 관리
- 내 데이터 다운로드
- 계정 비활성화
- 계정 완전 삭제

---

## 관련 구현 파일

### 주요 컴포넌트
- `frontend/lib/presentation/screens/main/main_nav_scaffold.dart`
- `frontend/lib/presentation/screens/home/home_tab.dart`
- `frontend/lib/presentation/screens/home/workspace_tab.dart`
- `frontend/lib/presentation/screens/home/activity_tab.dart`
- `frontend/lib/presentation/screens/home/profile_tab.dart`

### 관련 Provider
- `NavProvider`: 네비게이션 상태 관리
- `UIStateProvider`: UI 상태 관리
- `AuthProvider`: 인증 상태 관리

### 관련 위젯
- `GlobalSidebar`: 데스크톱 사이드바
- `ProfessorPendingBanner`: 교수 인증 대기 알림

### 관련 문서
- [워크스페이스 페이지](workspace-pages.md)
- [반응형 레이아웃](../responsive-layout.md)
- [사용자 경험 가이드](../user-experience-guide.md)