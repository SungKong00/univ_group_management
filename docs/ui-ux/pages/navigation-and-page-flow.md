# UI/UX 명세서: 네비게이션 및 페이지 플로우

본 문서는 애플리케이션의 핵심 네비게이션 구조와 페이지 전환에 대한 UI/UX 정책을 정의합니다.

## 1. 기본 레이아웃

전체 화면은 **상단 네비게이션 바(Top Navigation Bar)**와 **좌측 네비게이션 바(Left Navigation Bar)**로 구성됩니다.

-   **상단 네비게이션 바**: 페이지 전체 너비를 차지하며, 페이지의 제목과 핵심 상호작용(뒤로가기)을 담당합니다.
-   **좌측 네비게이션 바**: 상단 바 아래에 위치하며, 앱의 주요 기능들 사이를 이동하는 역할을 합니다.

## 2. 상단 네비게이션 바

-   **뒤로가기 버튼**:
    -   **위치**: 바의 가장 좌측.
    -   **기능**: 사용자가 거쳐온 페이지 기록을 기반으로, 정확히 이전 페이지로 이동합니다. (상세 내용은 `4.3. 뒤로가기 동작` 참고)
-   **페이지 정보** (계층적 브레드크럼):
    -   **위치**: 뒤로가기 버튼 오른쪽.
    -   **구조**:
        -   **주제목**: 진하고 큰 글씨 (20px/600/neutral900)로 현재 페이지 이름 표시
        -   **경로** (선택 사항): 옅고 작은 글씨 (14px/400/neutral600)로 페이지 계층 표시
        -   **구분자**: ">" 기호 (neutral500)로 경로 항목 구분
    -   **예시**:
        -   단순 페이지: "홈"
        -   계층 페이지: "워크스페이스 > 컴퓨터공학과 > 공지사항"
        -   프로필 하위: "프로필 > 정보수정"
    -   **디자인**: 이 정보가 차지하는 공간의 시작점은 좌측 네비게이션 바의 너비와 시각적으로 정렬되어 일관성을 유지해야 합니다.
    -   **동적 업데이트**: 페이지 전환 시 상단바 전체를 리로드하지 않고, 브레드크럼 텍스트만 동적으로 변경됩니다.

## 3. 좌측 네비게이션 바

### 3.1. 기본 상태 및 구성

-   **주요 메뉴 항목**:
    -   홈
    -   워크스페이스
    -   캘린더
    -   나의 활동
    -   프로필
-   **디자인**:
    -   각 메뉴 항목은 사용자가 명확히 인지하고 선택할 수 있도록 가로로 긴 직사각형 형태를 가집니다.
    -   선택된 항목의 오른쪽 끝에는 `|` 표시가 나타나 현재 활성화된 페이지임을 명시합니다.

### 3.2. 메뉴 버튼 구성 요소

각 버튼은 다음과 같은 요소로 구성됩니다.

1.  **아이콘**: 가장 좌측에 위치하여 메뉴를 시각적으로 나타냅니다.
2.  **페이지 이름**: 아이콘 오른쪽에 표시됩니다. (예: "홈")
3.  **페이지 설명**: 페이지 이름 아래에 더 작은 회색 계열의 글씨로 해당 페이지에 대한 간결한 설명을 제공합니다.

## 4. 페이지 전환 및 상태 관리

### 4.1. 일반적인 전환

-   사용자가 좌측 네비게이션 메뉴를 선택하면, 상단 바와 좌측 네비게이션 바는 유지된 채 **페이지 콘텐츠 영역만 새로 로드**됩니다.
-   이때 상단 바의 **페이지 정보** 텍스트는 전환된 페이지에 맞게 동적으로 변경됩니다.

### 4.2. 상태 유지 (State Persistence)

-   네비게이션을 통해 다른 페이지로 이동했다가 다시 돌아올 경우, 이전 페이지의 모든 상태(스크롤 위치, 입력 데이터 등)는 그대로 유지되어야 합니다. 사용자는 중단했던 지점에서 작업을 바로 이어갈 수 있습니다.

### 4.3. 뒤로가기 동작

-   상단 바의 '뒤로가기' 버튼은 단순한 브라우저의 뒤로가기가 아닌, **사용자의 실제 페이지 이동 경로를 기억**합니다.
-   **예시**:
    1.  '홈' 페이지에서 특정 그룹을 선택하여 '워크스페이스'로 진입합니다.
    2.  이때 좌측 네비게이션의 선택 상태는 '홈'에서 '워크스페이스'로 자동 변경됩니다.
    3.  사용자가 상단 바의 '뒤로가기' 버튼을 누릅니다.
    4.  페이지는 다시 '홈'으로 돌아가고, 좌측 네비게이션 선택 상태도 '홈'으로 복원됩니다.

## 5. 특수 워크플로우: 워크스페이스 진입

'워크스페이스' 메뉴 선택 시, 다른 메뉴와는 다른 독자적인 UI 플로우가 적용됩니다.

### 5.1. 진입 시나리오

-   사용자가 좌측 네비게이션 바에서 '워크스페이스'를 클릭하거나, '홈' 등 다른 페이지에서 특정 그룹에 진입하는 액션을 취할 때 이 플로우가 활성화됩니다.

### 5.2. 좌측 네비게이션 바 변화

-   **애니메이션**: 좌측 네비게이션 바는 **축소되는 애니메이션**과 함께 너비가 좁아집니다.
-   **축소 상태**:
    -   페이지 이름과 설명은 사라지고 **아이콘만** 남습니다.
    -   축소된 바의 너비는 상단 바의 '뒤로가기' 버튼 영역의 너비와 일치하여 시각적 통일성을 부여합니다.

### 5.3. 워크스페이스 초기 뷰 (웹)

-   워크스페이스 진입 시, 채널 목록 중 **가장 상단에 위치한 첫 번째 채널**의 내용이 기본으로 표시됩니다.

### 5.4. 채널 네비게이션 바 상세 구조

기존 페이지 콘텐츠 영역에는 **채널 네비게이션 바**가 새로 나타나며, 그 구조는 다음과 같습니다.

-   **그룹 메뉴 (상단)**
    -   그룹 홈
    -   캘린더
-   **채널 (중단)**
    -   사용자가 접근 권한을 가진 채널 목록이 표시됩니다.
    -   **읽지 않음 표시**: 읽지 않은 게시글이 있는 채널 옆에는 **숫자 배지(Badge)**로 개수를 표시합니다. 사용자가 해당 채널을 조회하면 이 배지는 사라집니다.
-   **그룹 관리 (하단)**
    -   현재 사용자가 그룹 관리 권한을 가진 경우에만 **그룹 관리** 버튼이 표시됩니다.
    -   이 버튼을 클릭하면, `workspaceStateProvider`의 `showGroupAdminPage` 함수가 호출되어 메인 컨텐츠 영역에 그룹 관리 페이지가 표시됩니다.

### 5.5. 게시글 작성 및 권한

-   **게시글 입력창**: 워크스페이스 채널 뷰 하단에는 현재 선택된 채널에 게시글을 작성할 수 있는 입력창이 생깁니다. 이 입력창의 영역은 좌측의 채널 네비게이션 바를 침범하지 않습니다.
-   **권한 처리**: 만약 현재 채널에서 사용자에게 게시글 작성 권한이 없는 경우, 게시글 입력창은 **비활성화 상태**로 표시되어야 합니다.

### 5.6. 댓글 기능 플로우

-   **댓글 창 열기**: 각 게시글 하단의 '댓글 작성' 버튼을 클릭하면, 우측에서 **사이드 바 형태의 댓글 창**이 슬라이드되어 나타납니다.
-   **레이아웃 조정**: 댓글 창이 나타날 때, 기존 게시글 목록이 표시되는 메인 콘텐츠 뷰의 너비는 줄어들어 댓글 창과 나란히 표시됩니다. 상단 네비게이션 바는 영향을 받지 않습니다.
-   **댓글 창 구조**:
    -   상단: 해당 게시글의 댓글들이 시간순으로 표시됩니다.
    -   하단: 게시글 입력창과 동일한 형태의 **댓글 입력창**이 위치합니다.

### 5.7. 텍스트 입력 필드 동작 (게시글/댓글 공통)

-   **자동 높이 조절**: 입력 내용에 따라 높이가 자동으로 조절되며, **최대 5줄**까지 늘어납니다.
-   **줄 바꿈**: `Shift + Enter` 키로 줄 바꿈을 할 수 있습니다.
-   **전송**: `Enter` 키를 누르면 작성이 완료되고 메시지가 전송됩니다.
-   **입력 필드 초기화**: 메시지 전송 후, 입력 필드는 **반드시 비워져야 합니다.** 이를 통해 이전에 입력한 내용이 남아 발생하는 중복 전송 버그를 방지합니다.

### 5.8. 상단 바 업데이트

-   상단 바 자체는 새로고침되지 않으며, 브레드크럼만 현재 컨텍스트를 명확히 나타내도록 업데이트됩니다.
-   **워크스페이스 진입 시**: "워크스페이스 > 컴퓨터공학과"
-   **채널 선택 시**: "워크스페이스 > 컴퓨터공학과 > 공지사항"
-   **향후 확장**: 그룹명 옆 드롭다운 버튼으로 워크스페이스 전환 기능 추가 예정

## 6. 모바일 네비게이션 및 레이아웃

모바일 환경에서는 웹 뷰와 다른 레이아웃 및 워크플로우가 적용됩니다.

### 6.1. 하단 네비게이션 바

-   웹의 좌측 네비게이션 바는 모바일에서 **하단 네비게이션 바**로 대체됩니다.
-   주요 메뉴(홈, 워크스페이스 등)는 하단 탭을 통해 접근합니다.

### 6.2. 모바일 워크스페이스 플로우

모바일에서 워크스페이스 진입 시, 화면 전체가 전환되는 단계적 플로우를 따릅니다.

1.  **채널 네비게이션 뷰**: 워크스페이스에 처음 진입하면, 화면 전체가 **채널 목록**으로 표시됩니다. 읽지 않은 게시글이 있는 채널에는 숫자 배지를 표시합니다.
2.  **게시글 뷰**: 채널 목록에서 특정 채널을 선택하면, 화면 전체가 해당 채널의 **게시글 목록**으로 전환됩니다. 채널에 진입하면 해당 채널의 읽지 않음 배지는 사라집니다.
3.  **댓글 뷰**: 게시글의 '댓글' 버튼을 누르면, 화면 전체가 해당 게시글의 **댓글 목록 및 입력창**으로 전환됩니다. 이때 하단 영역은 댓글 입력창으로 변경됩니다.

-   모든 전환 과정에서 상단 바는 유지되며, 페이지 정보만 동적으로 변경됩니다.

### 6.3. 모바일 브레드크럼 표시 규칙

모바일에서는 각 화면별로 최적화된 브레드크럼을 표시하여 사용자가 현재 위치를 직관적으로 파악할 수 있도록 합니다.

| 화면 | 브레드크럼 표시 | 예시 |
|-----|---------------|------|
| **채널 목록** | "워크스페이스" | `워크스페이스` |
| **게시글 목록** | "그룹명 > 채널명/기능명" | `컴퓨터공학과 > 공지사항`<br/>`컴퓨터공학과 > 홈`<br/>`컴퓨터공학과 > 캘린더` |
| **댓글 화면** | "댓글" | `댓글` |

**설계 의도:**
- **채널 목록**: "워크스페이스"로 단순 표시 → 사용자는 "채널 목록 화면에 있다"는 것을 인지
- **게시글 목록**: "그룹명 > 채널명" 표시 → 사용자는 "어떤 그룹의 어떤 채널을 보고 있다"는 것을 명확히 인지
- **댓글 화면**: "댓글"로 단순 표시 → 사용자는 "댓글을 보고 있다"는 것을 즉각 인지

이는 디자인 원칙 "Easy to Answer"를 따르며, 사용자가 "지금 어디 있지?"라는 질문에 즉답할 수 있도록 돕습니다.

## 7. 반응형 동작

웹과 모바일 뷰 사이의 화면 크기 변경 시, 사용자의 현재 컨텍스트가 유지되어야 합니다.

### 7.1. 웹 → 모바일 전환

-   **채널 뷰 유지**: 웹 뷰에서 특정 채널의 게시글을 보던 중 모바일 뷰로 전환되면, 모바일의 첫 화면(채널 목록)을 보여주는 대신, 보고 있던 **채널의 게시글 뷰**가 바로 표시되어야 합니다.
-   **댓글 뷰 유지**: 웹 뷰에서 특정 게시글의 댓글 사이드 바를 열어 둔 상태에서 모바일 뷰로 전환되면, 해당 **게시글의 전체 화면 댓글 뷰**가 바로 표시되어야 합니다.

### 7.2. 모바일 → 웹 전환

-   **댓글 뷰 상태 유지**: 모바일에서 특정 게시글의 댓글 뷰를 보던 중 웹 뷰로 전환되면, **댓글 사이드 바가 열린 상태의 웹 뷰**가 표시되어야 합니다.

### 7.3. 반응형 상태에서의 뒤로가기

-   뷰 전환 후에도 뒤로가기 동작의 일관성은 유지되어야 합니다.
-   모바일 워크스페이스에서의 뒤로가기 순서는 다음과 같습니다.
    `댓글 뷰` → (뒤로가기) → `게시글 뷰` → (뒤로가기) → `채널 네비게이션 뷰`
