# 엔티티 설계

## ## 1. 사용자 및 권한 (Users & Permissions)

사용자 계정, 그룹 내 신분, 역할 및 세부 권한을 관리하는 핵심 영역입니다.

### **User (사용자)**

서비스의 모든 구성원을 정의합니다.

| 컬럼명 | 데이터 타입 | 제약 조건 | 설명 |
| --- | --- | --- | --- |
| `id` | BIGINT | **PK**, Auto Increment | 사용자 고유 번호 |
| `email` | VARCHAR(255) | Not Null, **Unique** | 이메일 주소 (로그인 ID) |
| `nickname` | VARCHAR(50) | Not Null, **Unique** | 닉네임 |
| `name` | VARCHAR(50) | Not Null | 실명 |
| `user_role` | VARCHAR(20) | Not Null | 사용자 역할 ('STUDENT', 'PROFESSOR') |
| `status` | VARCHAR(20) | Not Null | 계정 상태 ('ACTIVE', 'PENDING_APPROVAL') |
| `profile_image_url` | VARCHAR(2048) |  | 프로필 이미지 주소 |
| `bio` | VARCHAR(100) |  | 한 줄 소개 |
| `created_at` | DATETIME | Not Null | 생성 일시 |

### **Member (멤버)**

사용자와 그룹의 관계를 정의하는 연결 테이블입니다.

| 컬럼명 | 데이터 타입 | 제약 조건 | 설명 |
| --- | --- | --- | --- |
| `id` | BIGINT | **PK**, Auto Increment | 멤버 관계 고유 번호 |
| `user_id` | BIGINT | Not Null, **FK** (User.id) | 사용자 ID |
| `group_id` | BIGINT | Not Null, **FK** (Group.id) | 그룹 ID |
| `role_id` | BIGINT | Not Null, **FK** (Role.id) | 그룹 내 역할 ID |
| `joined_at` | DATETIME | Not Null | 가입 일시 |

### **Role (역할)**

그룹 내에서 사용되는 역할(그룹장, 운영진 등)을 정의합니다.

| 컬럼명 | 데이터 타입 | 제약 조건 | 설명 |
| --- | --- | --- | --- |
| `id` | BIGINT | **PK**, Auto Increment | 역할 고유 번호 |
| `group_id` | BIGINT | **FK** (Group.id) | 이 역할이 속한 그룹 ID (null이면 시스템 기본 역할) |
| `name` | VARCHAR(50) | Not Null | 역할 이름 (예: 그룹장, 일반 멤버) |

### **Permission (권한)**

역할에 부여될 수 있는 세부 행동 권한을 정의합니다.

| 컬럼명 | 데이터 타입 | 제약 조건 | 설명 |
| --- | --- | --- | --- |
| `id` | BIGINT | **PK**, Auto Increment | 권한 고유 번호 |
| `name` | VARCHAR(100) | Not Null, **Unique** | 권한 이름 (예: `ANNOUNCEMENT_CREATE`) |

### **RolePermission (역할-권한 매핑)**

역할과 권한의 다대다 관계를 위한 연결 테이블입니다.

| 컬럼명 | 데이터 타입 | 제약 조건 | 설명 |
| --- | --- | --- | --- |
| `role_id` | BIGINT | **PK**, **FK** (Role.id) | 역할 ID |
| `permission_id` | BIGINT | **PK**, **FK** (Permission.id) | 권한 ID |

### **JoinRequest (가입 신청)**

사용자의 그룹 가입 요청을 관리합니다.

| 컬럼명 | 데이터 타입 | 제약 조건 | 설명 |
| --- | --- | --- | --- |
| `id` | BIGINT | **PK**, Auto Increment | 가입 신청 고유 번호 |
| `user_id` | BIGINT | Not Null, **FK** (User.id) | 신청한 사용자 ID |
| `group_id` | BIGINT | Not Null, **FK** (Group.id) | 신청한 그룹 ID |
| `status` | VARCHAR(20) | Not Null | 상태 ('PENDING', 'APPROVED', 'REJECTED') |
| `created_at` | DATETIME | Not Null | 신청 일시 |

---

## ## 2. 그룹 및 콘텐츠 (Groups & Content)

커뮤니티와 그 안에서 생성되는 모든 콘텐츠를 관리하는 영역입니다.

### **Group (그룹)**

모든 커뮤니티 활동의 기본 단위입니다.

| 컬럼명 | 데이터 타입 | 제약 조건 | 설명 |
| --- | --- | --- | --- |
| `id` | BIGINT | **PK**, Auto Increment | 그룹 고유 번호 |
| `parent_id` | BIGINT | **FK** (self-reference) | 상위 그룹 ID (계층 구조) |
| `name` | VARCHAR(100) | Not Null | 그룹 이름 |
| `description` | TEXT |  | 그룹 소개 |
| `created_at` | DATETIME | Not Null | 생성 일시 |

### **Channel (채널)**

그룹 내 게시물이 소속되는 공간입니다.

| 컬럼명 | 데이터 타입 | 제약 조건 | 설명 |
| --- | --- | --- | --- |
| `id` | BIGINT | **PK**, Auto Increment | 채널 고유 번호 |
| `group_id` | BIGINT | Not Null, **FK** (Group.id) | 채널이 속한 그룹 ID |
| `name` | VARCHAR(100) | Not Null | 채널 이름 (예: 공지사항) |

### **Post (게시글)**

채널에 작성되는 모든 글을 의미합니다.

| 컬럼명 | 데이터 타입 | 제약 조건 | 설명 |
| --- | --- | --- | --- |
| `id` | BIGINT | **PK**, Auto Increment | 게시글 고유 번호 |
| `channel_id` | BIGINT | Not Null, **FK** (Channel.id) | 게시글이 등록된 채널 ID |
| `author_id` | BIGINT | Not Null, **FK** (User.id) | 작성자 ID |
| `title` | VARCHAR(255) | Not Null | 제목 |
| `content` | TEXT | Not Null | 내용 |
| `created_at` | DATETIME | Not Null | 생성 일시 |

### **Comment (댓글)**

게시글에 대한 응답입니다.

| 컬럼명 | 데이터 타입 | 제약 조건 | 설명 |
| --- | --- | --- | --- |
| `id` | BIGINT | **PK**, Auto Increment | 댓글 고유 번호 |
| `post_id` | BIGINT | Not Null, **FK** (Post.id) | 부모 게시글 ID |
| `author_id` | BIGINT | Not Null, **FK** (User.id) | 작성자 ID |
| `parent_comment_id` | BIGINT | **FK** (self-reference) | 부모 댓글 ID (대댓글 구조) |
| `content` | TEXT | Not Null | 내용 |
| `created_at` | DATETIME | Not Null | 생성 일시 |

---

## ## 3. 모집 및 시스템 (Recruitment & System)

그룹 홍보와 사용자 알림 등 부가적인 시스템을 관리하는 영역입니다.

### **RecruitmentPost (모집 공고)**

그룹 홍보 및 모집을 위한 게시글입니다.

| 컬럼명 | 데이터 타입 | 제약 조건 | 설명 |
| --- | --- | --- | --- |
| `id` | BIGINT | **PK**, Auto Increment | 모집 공고 고유 번호 |
| `group_id` | BIGINT | Not Null, **FK** (Group.id) | 공고를 게시한 그룹 ID |
| `title` | VARCHAR(255) | Not Null | 제목 |
| `content` | TEXT | Not Null | 본문 |
| `start_date` | DATE | Not Null | 모집 시작일 |
| `end_date` | DATE | Not Null | 모집 종료일 |
| `status` | VARCHAR(20) | Not Null | 상태 ('ACTIVE', 'CLOSED') |

### **Tag (태그)**

모집 공고를 분류하기 위한 키워드입니다.

| 컬럼명 | 데이터 타입 | 제약 조건 | 설명 |
| --- | --- | --- | --- |
| `id` | BIGINT | **PK**, Auto Increment | 태그 고유 번호 |
| `name` | VARCHAR(50) | Not Null, **Unique** | 태그 이름 (예: #스터디) |

### **PostTag (공고-태그 매핑)**

모집 공고와 태그의 다대다 관계를 위한 연결 테이블입니다.

| 컬럼명 | 데이터 타입 | 제약 조건 | 설명 |
| --- | --- | --- | --- |
| `post_id` | BIGINT | **PK**, **FK** (RecruitmentPost.id) | 모집 공고 ID |
| `tag_id` | BIGINT | **PK**, **FK** (Tag.id) | 태그 ID |

### **Notification (알림)**

사용자에게 발송되는 시스템 알림입니다.

| 컬럼명 | 데이터 타입 | 제약 조건 | 설명 |
| --- | --- | --- | --- |
| `id` | BIGINT | **PK**, Auto Increment | 알림 고유 번호 |
| `recipient_id` | BIGINT | Not Null, **FK** (User.id) | 알림을 받는 사용자 ID |
| `type` | VARCHAR(50) | Not Null | 알림 종류 (예: `JOIN_APPROVED`) |
| `content` | VARCHAR(255) | Not Null | 알림 내용 |
| `is_read` | BOOLEAN | Not Null | 읽음 여부 |
| `created_at` | DATETIME | Not Null | 생성 일시 |