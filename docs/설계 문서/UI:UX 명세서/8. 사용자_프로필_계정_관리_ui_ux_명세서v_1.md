# 사용자 프로필·계정 관리 UI·UX 명세서 (Toss 철학 적용 · Flutter/Spring Boot) v1.0

> 목적: 사용자가 **내 정보를 빠르게 확인·관리**하고, **실수 없이 안전하게** 로그아웃/탈퇴까지 완수하도록 한다. 토스 철학(한 화면=한 목표 · 가치 먼저 · 에러는 다음으로 안내 · 일관성)을 전 구간에 적용.

---

## 0. Design Principles (요약)

- **한 화면 = 한 목표**: 내 정보=상태 확인/다음 행동 선택, 프로필 수정=저장, 로그인 정보=연결 상태 확인, 탈퇴=위험 행위 확정.
- **가치 먼저**: 첫 화면에 내 프로필·그룹 수·신청 현황을 요약(카드)으로 제시.
- **가드레일**: 닉네임 중복/업로드 실패/권한 에러 시 즉시 인라인 안내 + 다음 행동(재시도/다른 닉네임 제안).
- **일관성**: 카드/토스트/모달/바텀시트/Empty/스켈레톤/폼 검증/에러 문구 패턴 통일.
- **짧고 친근한 라이팅**: 결과 선언형(“저장했어요”, “탈퇴했어요”).

---

## 1. 범위 & KPI

- **범위(MVP)**: 내 정보 홈(그룹·신청·로그인 정보·로그아웃·서비스 탈퇴) / 프로필 수정(사진·닉네임·한 줄 소개) / 로그인 정보 보기 / 로그아웃 / 서비스 탈퇴 바텀시트(익명화 정책 표기).
- **KPI**
  - 내 정보 진입→목표 행동(수정/로그아웃/탈퇴) **p50 ≤ 10s**
  - 프로필 저장 성공률 **≥ 99%**, 닉네임 충돌 시 재시도 **≤ 2회**
  - 탈퇴 플로우 평균 완료 시간 **≤ 20s**

---

## 2. 페르소나 & 접근

- **학생/교수(일반 사용자)**: 자신의 프로필·그룹·신청·로그인 상태를 확인/수정.
- **접근 경로**: 전역 탭의 **마이페이지 아이콘** → **내 정보** 홈.

---

## 3. 정보 구조 & 라우팅(IA)

- **내 정보 홈** `/me`
  - 섹션 카드: **내 프로필 요약**(아바타·닉네임·소개 [수정])
  - **내가 속한 그룹**(숫자/리스트 진입 링크)
  - **신청 현황**(최근 1건 요약/상세로 이동)
  - **로그인 정보**(현재 연결된 소셜) / **로그아웃** / **서비스 탈퇴(위험 영역)**
- **프로필 수정** `/me/edit`
- **로그인 정보** `/me/login-info`
- **서비스 탈퇴(바텀시트)** `/me/delete (sheet)`

---

## 4. 상태 모델(State Model)

- **Profile**: `{avatarUrl, nickname(unique), bio}`
- **Auth**: `{providers:[google…], lastLoginAt}` (MVP: 읽기 전용)
- **Account**: `active | deleting | deleted`
- **탈퇴 영향**: 메시지/댓글 작성자 표기 → "(탈퇴한 사용자)"로 **익명화**(콘텐츠는 유지)

---

## 5. 화면 설계 (Screens)

### A) 내 정보 홈 — *현황 요약 & 다음 행동*

- **헤더**: "내 정보"
- **프로필 카드**: 아바타(원형) · 닉네임 · 한 줄 소개 · [프로필 수정]
- **그룹 카드**: "내가 속한 그룹 N" → 탭 시 그룹 리스트
- **신청 현황 카드**: 최근 상태(예: 승인 대기) → 탭 시 전체 보기
- **로그인 정보**: "구글로 로그인됨" → [자세히]
- **하단**: [로그아웃] (Secondary) · **[서비스 탈퇴] (Danger)**
- **빈/로딩/에러**: 스켈레톤(아바타/텍스트), "정보를 불러오지 못했어요" [다시 시도]

### B) 프로필 수정 — *1분 내 저장*

- **필드 순서**: 프로필 사진(원형 업로드) → 닉네임 → 한 줄 소개
- **제약**:
  - 닉네임: 2\~20자, 중복 불가, 특수문자 제한(한글/영문/숫자/밑줄/점)
  - 한 줄 소개: 최대 60자
  - 이미지: 10MB 이하, 정사각 권장(자르기)
- **실시간 검증**: 닉네임 변경 시 중복 체크(지연 400ms)
- **CTA**: [저장] (변경 시에만 활성) / [취소]
- **성공**: 토스트 "저장했어요" → 내 정보 홈으로
- **실패**: 인라인 에러(중복/형식) + 토스트(네트워크)

### C) 로그인 정보 — *연결 상태 보기*

- **목록**: 연결된 소셜: Google (표시 아이콘/라벨), 마지막 로그인 시각
- **(차순위)** 다른 소셜 연결/해제 버튼, 비밀번호 설정/변경(이메일 계정일 때)
- **안내**: "보안을 위해 로그인 정보를 확인하세요"

### D) 로그아웃 — *짧게 확정*

- 트리거: [로그아웃]
- **확인 모달**: "로그아웃할까요?" [취소] [로그아웃]
- **성공**: 로그인 화면으로 이동

### E) 서비스 탈퇴 — *안내가 먼저, 확정은 명확하게*

- 트리거: **[서비스 탈퇴]**
- **바텀시트**(스크롤 가능):
  - 타이틀: "정말 탈퇴하시겠어요?"
  - 본문(불릿):
    - 작성한 게시물/댓글은 **삭제되지 않고** "(탈퇴한 사용자)"로 **익명화**돼요
    - 그룹 참여/신청 내역은 삭제돼요(복구 불가)
  - **빨간 [탈퇴하기]** (문구 입력 단계 없이 바로 확정)
  - 하단 보조: "나중에 다시 가입할 수 있어요"
- **성공**: 토스트 "탈퇴했어요" → 스플래시/랜딩 이동
- **권장 보안**(선택): 재인증 요구(최근 로그인 10분 초과 시)

---

## 6. 컴포넌트 & 위젯(Flutter)

- `ProfileSummaryCard({avatarUrl, nickname, bio, onEdit})`
- `SectionCard({title, subtitle, trailing, onTap})` — 그룹/신청/로그인 정보 재사용
- `DangerZoneList({items[]})`
- `AvatarPicker({image, onPick, onCrop, onRemove})`
- `NicknameField({value, onChanged, checkDupAsync, errorText})`
- `BioField({value, maxLen=60})`
- `ConfirmDialog({title, description, confirmLabel, onConfirm})`
- `DeleteAccountSheet({bulletPoints[], confirmLabel, onConfirm})`

**디자인 토큰**

- 타이포: H1 24/32, H2 20/28, Body 16/24, Caption 13/18
- 간격: 4dp 그리드, 카드 패딩 16dp, 섹션 간격 24dp
- 모션: 시트 200–250ms, 모달 180ms, 토스트 2.5s

---

## 7. 마이크로카피 (Toss 톤)

- 저장 성공: **"저장했어요"**
- 로그아웃 확인: **"로그아웃할까요?"**
- 탈퇴 안내 타이틀: **"정말 탈퇴하시겠어요?"**
- 탈퇴 확정: **"탈퇴했어요"**
- 닉네임 중복: **"이미 사용 중인 닉네임이에요"**
- 이미지 오류: **"이미지를 불러오지 못했어요. 다시 시도해 주세요"**

---

## 8. 검증 규칙 & 예외 처리

- **닉네임 정책**: 중복 불가, 2\~20자/허용 문자만, 서버 충돌 409 → 인라인 "이미 사용 중".
- **프로필 공개**: MVP 전체 공개(향후 공개 범위 설정 계획).
- **탈퇴 정책**: 콘텐츠는 삭제하지 않고 작성자 표기만 **익명화**.
- **네트워크 오류**: 저장/탈퇴 실패 시 토스트 + 재시도 버튼(탈퇴는 안전상 재확인).
- **이미지 업로드 실패**: 썸네일 자리에 경고 아이콘 + [다시 시도].

---

## 9. 이벤트 & 계측(Analytics)

- `me_view`, `me_groups_open`, `me_applications_open`, `me_logininfo_open`
- `profile_edit_open`, `profile_save_submit`, `profile_save_fail`
- `logout_open`, `logout_confirm`
- `delete_open`, `delete_confirm`
- `nickname_check_dup(success|conflict)`

---

## 10. API 연동(UX 관점)

- **GET /me** → `{profile, groupsCount, lastApplication}`
- **PATCH /me/profile** `{avatar, nickname, bio}`
- **GET /me/login** → `{providers:["google"], lastLoginAt}`
- **POST /auth/logout** → 204 → 세션 파기
- **DELETE /me** → 202/204 (서버가 익명화 처리)
- **닉네임 중복 검사**: `GET /me/nickname/check?value=` → `{available:true|false}`

---

## 11. 텍스트 와이어프레임

### 11.1 내 정보 홈

```
[헤더]  내 정보
[프로필 카드]  아바타  닉네임  한 줄 소개     [프로필 수정]
[카드]  내가 속한 그룹  3  ＞
[카드]  신청 현황  승인 대기  ＞
[카드]  로그인 정보  Google로 로그인됨  ＞

[로그아웃]                [서비스 탈퇴]
```

### 11.2 프로필 수정

```
[아바타 업로드]
닉네임  __________________  (중복 검사)
한 줄 소개  __________________________ (0/60)

[ 취소 ]                              [ 저장 ]
```

### 11.3 서비스 탈퇴(바텀시트)

```
정말 탈퇴하시겠어요?
• 작성한 글/댓글은 삭제되지 않고 "(탈퇴한 사용자)"로 익명화돼요
• 그룹 참여/신청 내역은 삭제돼요(복구 불가)

[ 탈퇴하기 ] (빨간 버튼)
```

---

## 12. 수용 기준(AC)

1. 내 정보 홈에서 모든 핵심 섹션이 카드로 보이고, 1클릭으로 세부 화면으로 이동한다.
2. 프로필 저장은 닉네임 중복/형식 검증 후 300ms 내 시각 반응과 토스트를 제공한다.
3. 로그인 정보 화면은 연결된 소셜(구글)을 즉시 보여준다.
4. 서비스 탈퇴는 바텀시트에서 결과를 명확히 안내하고 **입력 문구 없이** [탈퇴하기]만으로 확정된다.
5. 탈퇴 후 재접속 시 계정은 비활성이고, 과거 게시글/댓글 작성자는 "(탈퇴한 사용자)"로 보인다.

---

## 13. 구현 메모(Flutter)

- 페이지: `MePage` / `ProfileEditPage` / `LoginInfoPage`
- 상태: Riverpod 권장. `meProvider`, `profileEditProvider`, `loginInfoProvider`
- 닉네임 중복 체크: `debounce(400ms)` 후 서버 조회, 로딩 인디케이터 점(Lottie 없이 텍스트)
- 이미지 자르기: 정사각 crop, 업로드 전 미리보기
- 접근성: 포커스 이동·라벨·터치 44dp, 바텀시트 VoiceOver/토크백 문구 명확화

---

## 14. 로드맵(차순위)

- 로그인 정보: 소셜 추가 연결/해제, 최근 로그인 기기/세션 관리, 2단계 인증
- 프로필 공개 범위 설정(전체/그룹만/비공개)
- 데이터 내보내기(내 활동 아카이브)

