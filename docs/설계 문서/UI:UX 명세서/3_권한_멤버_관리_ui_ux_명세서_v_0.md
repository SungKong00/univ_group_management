# 권한/멤버 관리 UI·UX 명세서 (Toss 철학 적용 · Flutter/Spring Boot) v0.9

> 본 문서는 프로젝트의 "권한/멤버 관리" 기능을 토스 디자인 철학에 맞춰 구체화한 실행 명세입니다. 목표: 관리자가 **실수 없이 빠르게** 멤버 승인/역할 변경/위임을 처리하도록, **한 화면=한 목표·즉시 피드백·가드레일 강화**를 설계 원칙으로 합니다.

---

## 0. Design Principles (Toss 가이드 적용 요약)
- **한 화면 = 한 목표**: 가입 승인/반려, 역할 변경, 강제 탈퇴, 위임 등 작업 단일화.
- **즉시 피드백**: 승인/변경/위임 → 300ms 내 UI 반응 + 토스트.
- **가드레일**: 자기 역할 변경 금지, 파괴적 행위 확인 모달, Undo 스낵바.
- **마이크로카피 = 친근/명확**: "내보냈어요", "위임했어요" 식의 능동/짧은 문장.

---

## 1. 범위 & 목표
- **범위**: 그룹장/교수/스태프의 멤버 승인, 반려, 역할 변경, 강제 탈퇴, 그룹장 위임, 역할 삭제.
- **성공 지표**
  - 승인 처리 시간: 평균 5초 이내.
  - 승인/위임/변경 후 오류율: < 1%.
  - Undo 활용률: ≥ 30%.

---

## 2. 사용자 여정 (User Journey)

### 2.1 관리자 플로우
1. **가입 대기 탭** → 승인/반려(사유 모달).
2. **현재 멤버 탭** → 행별 메뉴에서 역할 변경/강제 탈퇴/그룹장 위임.
3. **역할 관리 탭** → 역할 삭제 시 영향 모달 + Undo.

### 2.2 예외 흐름
- 본인 행: 역할 드롭다운 비활성 + 툴팁.
- 그룹장 탈퇴: 자동 임시 위임 → 전역 배너 안내.
- 위임 경쟁: 서버 409 → 토스트 "이미 다른 사람이 위임했어요".

---

## 3. 화면 설계 (Screens)

### A. 가입 대기 탭
- 카드: 아바타, 닉네임, 신청일, 메시지.
- 버튼: [거절], [승인].
- 거절: 사유 선택 모달(기준 미달 / 인원 충원 / 기타 텍스트).
- 결과: 토스트 + 목록 갱신.

### B. 현재 멤버 탭
- 행: 아바타, 닉네임, 역할 칩, 가입일, [더보기].
- 더보기 메뉴: 역할 변경 ▾, 강제 탈퇴, 그룹장 위임.
- 본인 행: 비활성 + 툴팁.

### C. 그룹장 위임 플로우
1. [위임하기] → 확인 모달: 대상 요약 + 영향 안내.
2. 성공 시 토스트 + 헤더 권한 배지 즉시 갱신.

### D. 역할 삭제 플로우
1. [삭제] → 영향 요약 모달(보유자 수 → 일반 멤버).
2. 삭제 → 토스트 + Undo 스낵바.

---

## 4. 컴포넌트 & 상태 (UI Components & States)
- **MemberRow**: 아바타, 닉네임, 역할칩, 가입일, 메뉴.
- **RoleDropdown**: 현재/옵션 역할 리스트, 자기 행은 disabled.
- **ApproveRejectBar**: 승인/거절 인라인 바.
- **RejectReasonDialog**: 사유 선택/텍스트.
- **ConfirmDangerDialog**: 탈퇴/삭제/위임 전 확인.
- **PermissionGuard**: 권한 없음 안내.

---

## 5. 마이크로카피 (예시)
- 승인: "가입을 승인했어요".
- 반려: "신청을 반려했어요".
- 역할 변경: "역할을 ‘{role}’로 변경했어요".
- 강제 탈퇴: "그룹에서 내보냈어요".
- 위임 완료: "그룹장을 위임했어요".
- 자동 위임 배너: "그룹장 권한이 임시로 위임되었어요".
- 역할 삭제: "역할을 삭제했어요" / Undo: "삭제를 취소했어요".

---

## 6. 상태/검증 규칙
- 자기 역할 변경 불가: 비활성 + 툴팁.
- 탈퇴 시: 게시물/댓글 유지 안내.
- 역할 삭제 시: 트랜잭션 보장, 실패 시 "일부 롤백 실패" 안내.
- Undo 5초 제공.

---

## 7. 이벤트 & 계측 (Analytics)
- pending_list_view, approve_click, reject_click(reason)
- role_dropdown_open, role_changed(prev,new)
- force_remove, delegate_open, delegate_confirm
- auto_delegate_assigned, role_delete_confirm, role_delete_undo

---

## 8. 와이어프레임 (텍스트)
```
[헤더] 그룹 관리
[탭]  현재 멤버 | 가입 대기

(가입 대기)
[아바타 닉네임  신청일]
[거절] [승인]
  └ (거절) 모달: 사유 선택 ▾  [확인]

(현재 멤버)
[아바타 닉네임] [역할칩] [가입일]  […]
   → 역할 변경 ▾
   → 강제 탈퇴
   → 그룹장 위임

(역할 삭제)
[역할 카드 …]  [삭제]
  └ 모달: "이 역할 보유자 12명 → 일반 멤버로 변경됩니다" [삭제] [취소]
  └ 스낵바: "역할을 삭제했어요" [되돌리기]
```

---

## 9. 수용 기준 (AC)
1. 승인/반려 시 300ms 내 반응 + 토스트.
2. 자기 행 역할 드롭다운은 항상 비활성.
3. 그룹장 위임 성공 시 헤더 즉시 갱신.
4. 역할 삭제 시 영향 요약 모달 필수.
5. 자동 임시 그룹장 지정 시 배너 1회 노출.
6. 권한 없는 사용자는 PermissionGuard 안내만 노출.
7. 실패 시 원인+다음 행동을 포함한 에러 메시지 제공.

