# Flutter 아키텍쳐

### 1. 상태 관리 (State Management): Riverpod

**"사내 중앙 정보 게시판"** 모델을 채택하여, 앱의 모든 데이터를 체계적이고 안전하게 관리합니다.

- **선택:** **Riverpod**
- **이유:**
    - **안전성:** 코드를 실행하기 전(컴파일 타임)에 에러를 미리 발견할 수 있어 안정성이 높습니다.
    - **유연성:** 위젯 트리에 종속되지 않는 구조로, 더 유연하고 테스트하기 쉬운 코드를 작성할 수 있습니다.
    - **확장성:** MVP의 빠른 개발 속도와 향후 서비스가 복잡해졌을 때의 확장성을 모두 만족시키는 가장 균형 잡힌 솔루션입니다.
- **구현 예시 (`WorkspaceProvider`):**
    - 워크스페이스 기능의 모든 상태(현재 워크스페이스 정보, 채널 목록, 멤버 목록, 로딩 상태, 에러 등)를 관리하는 `WorkspaceProvider`를 핵심 예시로 들 수 있습니다.
    - 이 Provider는 `WorkspaceService`를 통해 서버와 통신하고, UI는 Provider가 제공하는 데이터와 상태에만 의존하여 화면을 그립니다. 이를 통해 복잡한 워크스페이스 화면의 상태를 일관되고 예측 가능하게 관리합니다.

### 2. 프로젝트 구조 (Project Structure): 계층형 구조

- *"잘 정리된 파일 캐비닛"**처럼 코드의 역할을 기준으로 폴더를 명확히 분리하여 유지보수성을 극대화합니다.
- **선택:** **계층형 아키텍처 (Layered Architecture)**
- **실제 구조 (v1.5):**
    
    `lib/
    ├── core/           # 🔧 공용 도구함 (DI, 네트워크, 스토리지, 에러 처리)
    ├── data/           # 📂 원자재 창고 (서버 통신, 데이터 모델)
    │   ├── models/
    │   ├── repositories/
    │   └── services/
    ├── domain/         # 🧠 비즈니스 규칙 (순수 로직, data와 presentation의 중재자)
    │   └── repositories/
    ├── presentation/   # 🏬 전시 매장 (UI와 상태 관리)
    │   ├── providers/    # (UI를 위한 상태 관리 로직)
    │   ├── screens/
    │   ├── theme/
    │   └── widgets/
    └── main.dart`

### 3. UI 디자인 시스템: ThemeData와 재사용 위젯

- *"기업 브랜드 스타일 가이드"**를 만들어 앱 전체의 디자인 일관성을 확보하고, 향후 디자인 변경을 용이하게 합니다.
- **선택:** **ThemeData 및 재사용 위젯(Reusable Widgets)**
- **규칙:**
    1. **`ThemeData` 중앙 관리:** 앱의 모든 색상, 글꼴, 버튼 스타일 등은 `MaterialApp`의 `ThemeData`에 중앙에서 정의합니다.
    2. **재사용 위젯 제작:** `PrimaryButton`처럼 반복적으로 사용되는 UI 요소는 별도의 위젯으로 만들어, 필요할 때마다 가져다 사용하여 일관성을 유지합니다.

### 4. 화면 이동 (Routing): go_router

- *"건물의 주소와 내비게이션 시스템"**처럼 모든 화면에 고유한 URL 주소를 부여하여, 웹 환경에 최적화된 방식으로 화면을 관리합니다.
- **선택:** **go_router**
- **이유:**
    - **웹 최적화:** URL 기반 라우팅을 통해 브라우저의 뒤로가기/앞으로가기, 특정 주소로 직접 접근(Deep Linking) 등 MVP의 1순위 목표인 웹 개발에 필수적인 기능을 완벽하게 지원합니다.
    - **Flutter 공식 추천:** Flutter 팀이 공식적으로 지원하고 권장하는 라이브러리로 안정성이 보장됩니다.

### 5. 서버 통신 (API Client): dio

- *"인증 스티커를 알아서 붙여주는 전문 배송 업체"**를 고용하여, 백엔드 서버와의 통신을 효율적이고 안전하게 처리합니다.
- **선택:** **dio**
- **이유:**
    - **인터셉터(Interceptor):** **모든 API 요청을 중간에 가로채서 JWT 인증 토큰을 자동으로 추가**하는 로직을 한 곳에서 관리할 수 있습니다. 이는 반복적인 코드를 줄이고 인증 관련 실수를 원천적으로 방지하는 핵심 기능입니다.
    - **편의성:** 타임아웃 설정, 파일 전송 등 개발에 필요한 다양한 편의 기능을 기본으로 제공합니다.