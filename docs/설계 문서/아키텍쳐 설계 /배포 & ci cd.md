# 배포 & ci/cd

### 1. 기술 스택 (Tech Stack) 💻

- **프론트엔드:** **Flutter**
    - **MVP 목표:** 1순위로 **웹(Web)** 브라우저에서 원활하게 동작하는 것을 목표로 합니다.
- **백엔드:** **Spring Boot** (언어는 Kotlin 사용 권장)
- **데이터베이스:** **관계형 데이터베이스(RDBMS)** (AWS RDS 사용 예정)

### 2. 데이터베이스 설계 (ERD) 📊

- **최종 ERD:** 사용자, 그룹, 권한, 콘텐츠 등 모든 기능 명세를 반영한 [상세 ERD](https'이미지 링크')를 최종 확정했습니다.
- **주요 특징:**
    - `User`와 `Group`의 다대다 관계는 `Member`라는 연결 테이블을 통해 해결합니다.
    - 로그인 방식은 **Google 소셜 로그인만 사용**하므로, 보안과 단순성을 위해 `User` 테이블에서 **`password`컬럼은 제거**합니다.

### 3. 배포 아키텍처 (AWS 프리티어) ☁️

- **구성:** **EC2 (서버)** + **RDS (DB)** + **S3 (빌드 파일 저장소)**의 최소한의 구성으로 시작합니다.
- **프론트엔드 배포 방식 (통합):**
    - Flutter 프로젝트를 웹용으로 **빌드(Build)**한 결과물(HTML, JS 파일 등)을,
    - Spring Boot 프로젝트의 **`src/main/resources/static`** 폴더 안에 포함시켜,
    - **하나의 Spring Boot 애플리케이션(JAR)으로 함께 묶어서 배포**합니다.
    - 이를 통해 Spring Boot 서버가 API 제공과 웹사이트 호스팅을 모두 담당합니다.

---

### 4. CI/CD (자동 배포) 🚀

- **도구:** **GitHub Actions**
- **브랜치 전략:**
    - 평소 개발은 **`develop`** 브랜치에서 진행합니다.
    - 기능이 완성되어 `develop` -> **`main`** 브랜치로 코드를 병합(Merge)하면,
    - GitHub Actions가 이를 감지하여 **프로덕션 서버로 자동 배포**를 실행합니다.
- **파이프라인 흐름:**
    1. `main` 브랜치에 코드 병합
    2. (GitHub Actions) 프로젝트 자동 **빌드 및 테스트**
    3. (GitHub Actions) 실행 파일(JAR)을 **AWS S3**에 업로드
    4. (GitHub Actions) **AWS EC2**에 접속하여 S3의 새 파일을 가져와 서버 실행

### 5. 개발 정책 및 규칙 📜

- **민감 정보 관리:**
    - DB 비밀번호, JWT 키 등 모든 민감 정보는 **GitHub Actions의 Secret**에 저장합니다.
    - CI/CD 파이프라인이 실행될 때, 이 Secret들을 사용하여 **설정 파일(`application-prod.yml`)을 동적으로 생성**하고, EC2 서버에 안전하게 전달하는 자동화된 방식을 사용합니다.
- **DB 스키마 관리:** 초기 개발 속도를 위해 **JPA의 자동 스키마 업데이트 기능(`ddl-auto=update`)**을 사용합니다.
- **로깅:** MVP 단계에서는 **EC2 서버에 직접 파일 로그**를 기록하는 단순한 방식으로 시작합니다.
- **배포 중단:** MVP에서는 배포 시 발생하는 **수 초간의 서비스 중단은 허용**합니다.

---

### 6. 개발 시작점 (API 설계) 🗺️

- 가장 먼저 개발할 **'인증/인가'** 기능에 대한 API 엔드포인트를 아래와 같이 확정하고 개발을 시작합니다.
    - **회원가입:** `POST /api/auth/signup`
    - **구글 로그인:** `POST /api/auth/google`
    - **내 정보 조회:** `GET /api/users/me` (인증 토큰 필요)